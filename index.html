<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Swell API Reference</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight, .highlight .w {
  color: #f8f8f2;
  background-color: #272822;
}
.highlight .err {
  color: #151515;
  background-color: #ac4142;
}
.highlight .c, .highlight .cd, .highlight .cm, .highlight .c1, .highlight .cs {
  color: #505050;
}
.highlight .cp {
  color: #f4bf75;
}
.highlight .nt {
  color: #f4bf75;
}
.highlight .o, .highlight .ow {
  color: #d0d0d0;
}
.highlight .p, .highlight .pi {
  color: #d0d0d0;
}
.highlight .gi {
  color: #90a959;
}
.highlight .gd {
  color: #ac4142;
}
.highlight .gh {
  color: #6a9fb5;
  background-color: #151515;
  font-weight: bold;
}
.highlight .k, .highlight .kn, .highlight .kp, .highlight .kr, .highlight .kv {
  color: #aa759f;
}
.highlight .kc {
  color: #d28445;
}
.highlight .kt {
  color: #d28445;
}
.highlight .kd {
  color: #d28445;
}
.highlight .s, .highlight .sb, .highlight .sc, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .s1 {
  color: #90a959;
}
.highlight .sr {
  color: #75b5aa;
}
.highlight .si {
  color: #8f5536;
}
.highlight .se {
  color: #8f5536;
}
.highlight .nn {
  color: #f4bf75;
}
.highlight .nc {
  color: #f4bf75;
}
.highlight .no {
  color: #f4bf75;
}
.highlight .na {
  color: #6a9fb5;
}
.highlight .m, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .il, .highlight .mo, .highlight .mb, .highlight .mx {
  color: #90a959;
}
.highlight .ss {
  color: #90a959;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" />
      </span>
    </a>
    <div class="tocify-wrapper">
      <img src="images/logo.png" />
        <div class="lang-selector">
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc">
      </div>
        <ul class="toc-footer">
            <li><a href='https://www.swellrewards.com'>Learn more about Swell</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        
          <h1 id="markup">MARKUP</h1>

<h2 id="introduction">Introduction</h2>

<p>Swell provides some html markup you can use to easily incorporate Swell components directly on your website. Use this markup to do things as simple as displaying point balances and referral links to building a full blown rewards page from scratch.</p>

<h2 id="campaigns">Campaigns</h2>

<pre class="highlight html"><code>
<span class="c">&lt;!-- as a link but can easily be any html element --&gt;</span>
  <span class="nt">&lt;a</span> <span class="na">class=</span><span class="s">"swell-campaign-link"</span>
     <span class="na">data-campaign-id=</span><span class="s">"123"</span>
     <span class="na">data-display-mode=</span><span class="s">"modal"</span>
     <span class="na">href=</span><span class="s">"javascript:void(0)"</span><span class="nt">&gt;</span>Follow Us on Twitter<span class="nt">&lt;/a&gt;</span>

</code></pre>

<h4 id="participate-in-campaigns">Participate in campaigns</h4>

<p>You can use this markup to allow your customers to participate in your campaigns without using the Rewards Popup. Use the class name &ldquo;swell­-campaign­-link&rdquo; on any element you&rsquo;d like to trigger one of your campaigns when clicked. You also need to specify data attributes for the &ldquo;campaign­-id&rdquo; and the &ldquo;display­-mode&rdquo;.</p>

<h4 id="data-attributes">Data Attributes</h4>

<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>campaign-id</td>
<td>int</td>
<td>The id of the campaign to trigger. You can find it in the Swell Admin by clicking on the Customize link for a particular campaign.</td>
</tr>
<tr>
<td>display-mode</td>
<td>string</td>
<td>Can be &ldquo;modal&rdquo; or &ldquo;direct&rdquo;. Modal will trigger a popup window that shows campaign details with a call to action. Direct will trigger the action immediately upon click (same effect as clicking the CTA in the modal).</td>
</tr>
</tbody></table>

<h2 id="redemption-options">Redemption Options</h2>

<pre class="highlight html"><code>
  <span class="c">&lt;!-- as a link but can easily be any html element --&gt;</span>
  <span class="nt">&lt;a</span> <span class="na">class=</span><span class="s">"swell-redemption-link"</span>
     <span class="na">data-redemption-option-id=</span><span class="s">"123"</span>
     <span class="na">href=</span><span class="s">"javascript:void(0)"</span><span class="nt">&gt;</span>Redeem 500 Points for $5 Off Coupon<span class="nt">&lt;/a&gt;</span>

</code></pre>

<h4 id="redeem-points-for-a-discount">Redeem points for a discount</h4>

<p>You can use this markup to allow your customers to redeem their points for a discount without using the Rewards Popup. Use the class name &ldquo;swell­-redemption-link&rdquo; on any element you&rsquo;d like to trigger one of your redemption options when clicked. You also need to specify data attributes for the &ldquo;redemption-option-id&rdquo;.</p>

<h4 id="data-attributes">Data Attributes</h4>

<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>redemption-option-id</td>
<td>int</td>
<td>The id of the redemption option to trigger. You can find it in the Swell Admin by clicking on the Customize link for a particular option.</td>
</tr>
</tbody></table>

<h2 id="customer-details">Customer Details</h2>

<p>Use any of the below to display program data about the logged in customer. Make sure to include these elements only if there exists a logged in customer otherwise they will not populate.</p>

<h3 id="point-balance">Point Balance</h3>

<pre class="highlight html"><code>
  <span class="c">&lt;!-- the content of the tag will be replaced by the actual point balance on page load.
       Decide what you'd like the customer to see while it loads --&gt;</span>


  <span class="c">&lt;!-- show 0 until point balance is loaded --&gt;</span>
  <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"swell-point-balance"</span><span class="nt">&gt;</span>0<span class="nt">&lt;/span&gt;</span>


  <span class="c">&lt;!-- show nothing until point balance is loaded --&gt;</span>
  <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"swell-point-balance"</span><span class="nt">&gt;&lt;/span&gt;</span>


  <span class="c">&lt;!-- show font awesome spinner until point balance is loaded --&gt;</span>
  <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"swell-point-balance"</span><span class="nt">&gt;&lt;i</span> <span class="na">class=</span><span class="s">"fa fa-spin fa-spinner"</span><span class="nt">&gt;&lt;/i&gt;&lt;/span&gt;</span>

</code></pre>

<h4 id="display-customer-39-s-current-point-balance">Display customer&rsquo;s current point balance</h4>

<p>You can use this markup to display the customer&rsquo;s current point balance. Great for reminding the customer how many points they have to use or how close they are to earning a reward. Use the class name &ldquo;swell-point-balance&rdquo; on the element you would like to display the point balance inside of.</p>

<h3 id="referral-link">Referral Link</h3>

<pre class="highlight html"><code>
  <span class="c">&lt;!-- the content of the tag will be replaced by the actual referral link on page load.
       Decide what you'd like the customer to see while it loads --&gt;</span>


  <span class="c">&lt;!-- show nothing until referral link is loaded --&gt;</span>
  <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"swell-referral-link"</span><span class="nt">&gt;&lt;/span&gt;</span>


  <span class="c">&lt;!-- show font awesome spinner until referral link is loaded --&gt;</span>
  <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"swell-referral-link"</span><span class="nt">&gt;&lt;i</span> <span class="na">class=</span><span class="s">"fa fa-spin fa-spinner"</span><span class="nt">&gt;&lt;/i&gt;&lt;/span&gt;</span>

</code></pre>

<h4 id="display-customer-39-s-current-referral-link">Display customer&rsquo;s current referral link</h4>

<p>You can use this markup to display the customer&rsquo;s current referral link. Use the class name &ldquo;swell-referral-link&rdquo; on the element you would like to display the referral link inside of.</p>

<h3 id="earning-history">Earning History</h3>

<pre class="highlight html"><code>
  <span class="c">&lt;!-- as a link but can easily be any html element --&gt;</span>
  <span class="nt">&lt;a</span> <span class="na">class=</span><span class="s">"swell-history-link"</span> <span class="na">href=</span><span class="s">"javascript:void(0)"</span><span class="nt">&gt;</span>View Rewards History<span class="nt">&lt;/a&gt;</span>

</code></pre>

<h4 id="display-customer-39-s-rewards-history">Display customer&rsquo;s rewards history</h4>

<p>You can use this markup to display the customer&rsquo;s rewards history. This will include all the times a customer has earned points, earned a discount, or redeemed points for a discount. Use the class name &ldquo;swell-history-link&rdquo; on the element you would like to trigger the rewards history modal.</p>

<h2 id="referral-program">Referral Program</h2>

<p>Use this markup if you want to include some of the referral program components directly on your website. You can setup traditional social share icons that allow your customer to share their referral link on the social media platform of their choice. You can also directly trigger the Referral Share Popup that you designed in the Swell Admin.</p>

<h3 id="sharing">Sharing</h3>

<pre class="highlight html"><code>
  <span class="c">&lt;!-- as links but can easily be any html element --&gt;</span>

  <span class="c">&lt;!-- facebook --&gt;</span>
  <span class="nt">&lt;a</span> <span class="na">class=</span><span class="s">"swell-share-referral-facebook"</span> <span class="na">href=</span><span class="s">"javascript:void(0)"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;i</span> <span class="na">class=</span><span class="s">"fa fa-facebook-square"</span><span class="nt">&gt;&lt;/i&gt;</span> Share your referral link on Facebook
  <span class="nt">&lt;/a&gt;</span>

  <span class="c">&lt;!-- facebook messenger --&gt;</span>
  <span class="nt">&lt;a</span> <span class="na">class=</span><span class="s">"swell-share-referral-messenger"</span> <span class="na">href=</span><span class="s">"javascript:void(0)"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;i</span> <span class="na">class=</span><span class="s">"fa fa-envelope"</span><span class="nt">&gt;&lt;/i&gt;</span> Share your referral link via Facebook Messenger
  <span class="nt">&lt;/a&gt;</span>

  <span class="c">&lt;!-- twitter --&gt;</span>
  <span class="nt">&lt;a</span> <span class="na">class=</span><span class="s">"swell-share-referral-twitter"</span> <span class="na">href=</span><span class="s">"javascript:void(0)"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;i</span> <span class="na">class=</span><span class="s">"fa fa-twitter-square"</span><span class="nt">&gt;&lt;/i&gt;</span> Share your referral link on Twitter
  <span class="nt">&lt;/a&gt;</span>

  <span class="c">&lt;!-- email --&gt;</span>
  <span class="nt">&lt;a</span> <span class="na">class=</span><span class="s">"swell-share-referral-email"</span> <span class="na">href=</span><span class="s">"javascript:void(0)"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;i</span> <span class="na">class=</span><span class="s">"fa fa-envelope"</span><span class="nt">&gt;&lt;/i&gt;</span> Share your referral link via Email
  <span class="nt">&lt;/a&gt;</span>


</code></pre>

<p>Use this markup to directly trigger sharing on one of the social media platforms. They all use a class name with a similar pattern: &ldquo;swell-share-referral-[platform]&rdquo;</p>

<h4 id="platform-class-names">Platform Class Names</h4>

<table><thead>
<tr>
<th>Platform</th>
<th>Class</th>
</tr>
</thead><tbody>
<tr>
<td>facebook</td>
<td>swell-share-referral-facebook</td>
</tr>
<tr>
<td>facebook messenger</td>
<td>swell-share-referral-messenger</td>
</tr>
<tr>
<td>twitter</td>
<td>swell-share-referral-twitter</td>
</tr>
<tr>
<td>email</td>
<td>swell-share-referral-email</td>
</tr>
</tbody></table>

<h3 id="popup">Popup</h3>

<pre class="highlight html"><code>
  <span class="c">&lt;!-- as a link but can easily be any html element --&gt;</span>
  <span class="nt">&lt;a</span> <span class="na">class=</span><span class="s">"swell-referral-link-popup"</span> <span class="na">href=</span><span class="s">"javascript:void(0)"</span><span class="nt">&gt;</span>Refer Your Friends<span class="nt">&lt;/a&gt;</span>

</code></pre>

<p>You can use this markup to allow your customers to refer their friends without using the Rewards Popup. Use the class name &ldquo;swell­-referral-link-popup&rdquo; on any element you&rsquo;d like to trigger the popup when clicked. Make sure you have designed and enabled this popup from the Referral Program section of your Swell Admin.</p>

          <h1 id="javascript-sdk">JAVASCRIPT SDK</h1>

<h2 id="introduction">Introduction</h2>

<p>Swell allows you to take even more control of your program by exposing a javascript object on the window called <code class="prettyprint">swellAPI</code> which enables you to perform many Swell functions programmatically. In addition to the exposed object, Swell triggers events on the document object enabling you to hook into key interactions your customers are taking with the program.</p>

<h2 id="events">Events</h2>

<pre class="highlight javascript"><code>
  <span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s2">"swell:event:name:here"</span><span class="p">,</span> <span class="nx">eventHandler</span><span class="p">);</span>

</code></pre>

<p>All Swell related events are triggered on the document object. Please see example on the right for an example of how to listen for these events using jQuery.</p>

<h3 id="swell-initialized">swell:initialized</h3>

<pre class="highlight javascript"><code>
  <span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s2">"swell:initialized"</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="c1">// do something using my campaigns or redemption options</span>
  <span class="p">});</span>

</code></pre>

<p>This event is triggered after page load when the Swell javascript is finished loading. This is useful if you want to know when you can safely read campaign and redemption option data from the swellAPI object. Note: This is triggered before loading the logged in customers data from Swell. Please use the Setup event if you are interested in the customers data.</p>

<h3 id="swell-setup">swell:setup</h3>

<pre class="highlight javascript"><code>
  <span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s2">"swell:setup"</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="c1">// do something using logged in customer (campaigns and redemption options available too)</span>
  <span class="p">});</span>

</code></pre>

<p>This event is triggered after Swell has completely finished setup. The main difference between setup and initialized is that setup waits until the logged in customer&rsquo;s details have been loaded from Swell servers before firing.</p>

<h3 id="swell-redemption-created">swell:redemption:created</h3>

<pre class="highlight javascript"><code>
  <span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s2">"swell:redemption:created"</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">redemption</span><span class="p">){</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">redemption</span><span class="p">.</span><span class="nx">discountType</span> <span class="o">===</span> <span class="s2">"product"</span><span class="p">){</span>
      <span class="c1">// add the free product to cart</span>
      <span class="nx">cartJS</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">redemption</span><span class="p">.</span><span class="nx">appliesToId</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="c1">// control the display of the coupon code to your customers</span>
      <span class="nx">myCoolUI</span><span class="p">.</span><span class="nx">showCouponCode</span><span class="p">(</span><span class="nx">redemption</span><span class="p">.</span><span class="nx">couponCode</span><span class="p">);</span>

      <span class="c1">// save the code for later (to display it on future page loads?)</span>
      <span class="nx">sessionStorage</span><span class="p">.</span><span class="nx">setItem</span><span class="p">(</span><span class="s2">"most-recent-coupon"</span><span class="p">,</span> <span class="nx">redemption</span><span class="p">.</span><span class="nx">couponCode</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">});</span>

</code></pre>

<p>This event is triggered when a redemption is made by a customer (or programatically via SDK). This is often helpful if you are implementing a custom redemption UX. The event is passed a single object representing the redemption made. It will include the following attributes:</p>

<h4 id="redemption-attributes">Redemption Attributes</h4>

<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>couponCode</td>
<td>string</td>
<td>The coupon code for this discount</td>
</tr>
<tr>
<td>pointsUsed</td>
<td>int</td>
<td>The amount of points used for this redemption</td>
</tr>
<tr>
<td>appliesToId</td>
<td>int</td>
<td>The product, variant, or collection id this discount can be used for</td>
</tr>
<tr>
<td>discountType</td>
<td>string</td>
<td>A string representing the type of discount this redemption was for. Possible values include: fixed_amount, percentage, variable, shipping, product.</td>
</tr>
<tr>
<td>discountRateCents</td>
<td>int</td>
<td>If converting points to fixed dollar discount this is the conversion rate used in cents per point.</td>
</tr>
<tr>
<td>redemptionOptionId</td>
<td>int</td>
<td>The redemption option that was used to generate this redemption.</td>
</tr>
</tbody></table>

<h2 id="get-customer-details">Get Customer Details</h2>

<h4 id="swellapi-getcustomerdetails">swellAPI.getCustomerDetails()</h4>

<p>This method returns an object containing all the program details about the logged in customer.  You can use this to create custom ui&rsquo;s that display items like their current point balance, referral link, and earning/redemption history.</p>

<pre class="highlight javascript"><code>  <span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s2">"swell:setup"</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="kd">var</span> <span class="nx">customerDetails</span> <span class="o">=</span> <span class="nx">swellAPI</span><span class="p">.</span><span class="nx">getCustomerDetails</span><span class="p">();</span>

    <span class="nx">$</span><span class="p">(</span><span class="s2">"#custom-point-balance-ui"</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">customerDetails</span><span class="p">.</span><span class="nx">pointsBalance</span><span class="p">);</span>
    <span class="nx">$</span><span class="p">(</span><span class="s2">"#custom-referral-link-ui"</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">customerDetails</span><span class="p">.</span><span class="nx">referralLink</span><span class="p">);</span>

    <span class="nx">customerDetails</span><span class="p">.</span><span class="nx">actionHistoryItems</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">item</span><span class="p">){</span>
      <span class="nx">$</span><span class="p">(</span><span class="s2">"#custom-history-container"</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span>
        <span class="s2">"&lt;li&gt;"</span> <span class="o">+</span>
          <span class="nx">item</span><span class="p">.</span><span class="nx">date</span>   <span class="o">+</span> <span class="s2">" -- "</span> <span class="o">+</span>
          <span class="nx">item</span><span class="p">.</span><span class="nx">action</span> <span class="o">+</span> <span class="s2">" -- "</span> <span class="o">+</span>
          <span class="nx">item</span><span class="p">.</span><span class="nx">points</span> <span class="o">+</span>
        <span class="s2">"&lt;/li&gt;"</span><span class="p">);</span>
    <span class="p">});</span>
  <span class="p">})</span>
</code></pre>

<h4 id="details-object">Details Object</h4>

<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>email</td>
<td>string</td>
<td>The customer&rsquo;s email address</td>
</tr>
<tr>
<td>referralLink</td>
<td>string</td>
<td>The customer&rsquo;s unique referral link</td>
</tr>
<tr>
<td>referralCode</td>
<td>string</td>
<td>The customer&rsquo;s referral code (eg. abcd123)</td>
</tr>
<tr>
<td>pointsBalance</td>
<td>int</td>
<td>The customer&rsquo;s current point balance</td>
</tr>
<tr>
<td>actionHistoryItems</td>
<td>array</td>
<td>The customer&rsquo;s earning and redemption history</td>
</tr>
<tr>
<td>vipTier</td>
<td>obj</td>
<td>An object with details about the customer&rsquo;s current tier level</td>
</tr>
<tr>
<td>vipTierStats</td>
<td>obj</td>
<td>An object with details about the customer&rsquo;s current progress toward vip tiers.</td>
</tr>
</tbody></table>

<h4 id="action-history-item-object">Action History Item Object</h4>

<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>createdAt</td>
<td>datetime</td>
<td>A timestamp when this item was created</td>
</tr>
<tr>
<td>date</td>
<td>date</td>
<td>The date (without time) when this item was created</td>
</tr>
<tr>
<td>action</td>
<td>string</td>
<td>A short description of either the action/campaign completed or the redemption option earned/redeemed</td>
</tr>
<tr>
<td>points</td>
<td>int</td>
<td>The number of points that were either earned or redeemed</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>For campaigns this can either be Approved, Pending, Reversed, or a percentage complete.  For coupons this will be the coupon code</td>
</tr>
</tbody></table>

<h4 id="vip-tier-object">VIP Tier Object</h4>

<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td>string</td>
<td>The name of the tier</td>
</tr>
<tr>
<td>description</td>
<td>string</td>
<td>A short description of the tier requirements</td>
</tr>
<tr>
<td>pointsMultiplier</td>
<td>decimal</td>
<td>The points multiplier for the current tier</td>
</tr>
</tbody></table>

<h4 id="vip-tier-stats-object">VIP Tier Stats Object</h4>

<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>pointsEarned</td>
<td>int</td>
<td>How many points the customer has earned within the tier window</td>
</tr>
<tr>
<td>amountSpentCents</td>
<td>int</td>
<td>How many cents the customer has spent within the tier window</td>
</tr>
<tr>
<td>purchasesMade</td>
<td>int</td>
<td>How many purchases the customer has made within the tier window</td>
</tr>
</tbody></table>

<h2 id="refresh-customer-details">Refresh Customer Details</h2>

<pre class="highlight javascript"><code>  <span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s2">"swell:setup"</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>

    <span class="nx">swellAPI</span><span class="p">.</span><span class="nx">refreshCustomerDetails</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
      <span class="kd">var</span> <span class="nx">customerDetails</span> <span class="o">=</span> <span class="nx">swellAPI</span><span class="p">.</span><span class="nx">getCustomerDetails</span><span class="p">();</span>
    <span class="p">});</span>

  <span class="p">})</span>
</code></pre>

<h4 id="swellapi-refreshcustomerdetails-callback">swellAPI.refreshCustomerDetails(callback)</h4>

<p>This method loads the latest customer details from the server.  You usually won&rsquo;t have to use this as the Swell JS automatically refreshes the customer details.  The main use case for this is if you trigger a custom action or point redemption and want to update customer related ui.</p>

<h2 id="get-campaign-data">Get Campaign Data</h2>

<h4 id="swellapi-getactivecampaigns">swellAPI.getActiveCampaigns()</h4>

<p>This method returns an array containing all active campaigns you are running as well as the logged in customer&rsquo;s status toward each one.  You can use this method to build custom ui around your campaigns.</p>

<pre class="highlight javascript"><code>  <span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s2">"swell:setup"</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="kd">var</span> <span class="nx">activeCampaigns</span> <span class="o">=</span> <span class="nx">swellAPI</span><span class="p">.</span><span class="nx">getActiveCampaigns</span><span class="p">();</span>

    <span class="nx">activeCampaigns</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">campaign</span><span class="p">){</span>
      <span class="c1">// render each campaign</span>
    <span class="p">});</span>
  <span class="p">})</span>
</code></pre>

<h4 id="campaign-object">Campaign Object</h4>

<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>int</td>
<td>The campaign id, useful for setting up click handlers or triggering custom actions</td>
</tr>
<tr>
<td>ctaText</td>
<td>string</td>
<td>­the call to action button text set in swell admin</td>
</tr>
<tr>
<td>details</td>
<td>string</td>
<td>the description of the campaign set in the swell admin</td>
</tr>
<tr>
<td>title  ­</td>
<td>string</td>
<td>the one line description of the campaign set in swell admin</td>
</tr>
<tr>
<td>expiresAt</td>
<td>datetime</td>
<td>campaign expiration if campaign is running for limited time</td>
</tr>
<tr>
<td>icon</td>
<td>string</td>
<td>the font awesome icon class (or image url) set for this campaign</td>
</tr>
<tr>
<td>rewardText</td>
<td>string</td>
<td>description of the reward the customer will receive for completion</td>
</tr>
<tr>
<td>customerActionsCompleted</td>
<td>int</td>
<td>number of actions completed (if applicable)</td>
</tr>
<tr>
<td>customerCanParticipate</td>
<td>boolean</td>
<td>based on the rules, can this customer participate right now</td>
</tr>
<tr>
<td>customerCompleted</td>
<td>boolean</td>
<td>flag whether or not they have completed the campaign</td>
</tr>
<tr>
<td>customerCompletions</td>
<td>int</td>
<td>number of times they&rsquo;ve completed the campaign</td>
</tr>
<tr>
<td>customerMinutesUntilNextParticipation</td>
<td>int</td>
<td>number of minutes until customer can participate in the campaign again</td>
</tr>
<tr>
<td>customerHoursUntilNextParticipation</td>
<td>int</td>
<td>number of hours until customer can participate in the campaign again</td>
</tr>
<tr>
<td>customerDaysUntilNextParticipation</td>
<td>int</td>
<td>number of days until customer can participate in the campaign again</td>
</tr>
</tbody></table>

<h2 id="get-redemption-option-data">Get Redemption Option Data</h2>

<h4 id="swellapi-getactiveredemptionoptions">swellAPI.getActiveRedemptionOptions()</h4>

<p>This method returns an array containing all active redemption options you setup.  You can use this method to build custom ui around your redemption options.</p>

<pre class="highlight javascript"><code>  <span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s2">"swell:setup"</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="kd">var</span> <span class="nx">redemptionOptions</span> <span class="o">=</span> <span class="nx">swellAPI</span><span class="p">.</span><span class="nx">getActiveRedemptionOptions</span><span class="p">();</span>

    <span class="nx">redemptionOptions</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">option</span><span class="p">){</span>
      <span class="c1">// render each option</span>
    <span class="p">});</span>
  <span class="p">})</span>
</code></pre>

<h4 id="redemption-option-object">Redemption Option Object</h4>

<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>int</td>
<td>The redemption option id, useful for setting up click handlers or triggering custom redemptions</td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td>name of this option as set in the admin</td>
</tr>
<tr>
<td>icon</td>
<td>string</td>
<td>the font awesome icon class or image url set for this option</td>
</tr>
<tr>
<td>description</td>
<td>string</td>
<td>the description of this option</td>
</tr>
<tr>
<td>costText</td>
<td>string</td>
<td>the number of points required string set in ad min &ldquo;200 Points&rdquo;</td>
</tr>
<tr>
<td>costInPoints</td>
<td>int</td>
<td>the number of points required to redeem this option</td>
</tr>
</tbody></table>

<h2 id="get-vip-tier-data">Get VIP Tier Data</h2>

<h4 id="swellapi-getviptiers">swellAPI.getVipTiers()</h4>

<p>This method returns an array containing all vip tiers you setup.  You can use this method to build custom ui around your vip tier program.</p>

<pre class="highlight javascript"><code>  <span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s2">"swell:setup"</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="kd">var</span> <span class="nx">vipTiers</span> <span class="o">=</span> <span class="nx">swellAPI</span><span class="p">.</span><span class="nx">getVipTiers</span><span class="p">();</span>

    <span class="nx">vipTiers</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">tier</span><span class="p">){</span>
      <span class="c1">// do something with each tier</span>
    <span class="p">});</span>
  <span class="p">})</span>
</code></pre>

<h4 id="vip-tier-object">VIP Tier Object</h4>

<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>int</td>
<td>The vip tier id</td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td>name of this tier as set in the admin</td>
</tr>
<tr>
<td>description</td>
<td>string</td>
<td>the description of this tier</td>
</tr>
<tr>
<td>requiredAmountSpentCents</td>
<td>int</td>
<td>The amount of cents a customer must spend within window to earn this tier</td>
</tr>
<tr>
<td>requiredAmountSpent</td>
<td>string</td>
<td>A version of requiredAmountSpentCents useful for display (e.g. &ldquo;$100&rdquo;)</td>
</tr>
<tr>
<td>requiredPointsEarned</td>
<td>int</td>
<td>The amount of points a customer must earn within window to earn this tier</td>
</tr>
<tr>
<td>requiredPurchasesMade</td>
<td>int</td>
<td>The amount of purchases a customer must make within window to earn this tier</td>
</tr>
<tr>
<td>pointsMultiplier</td>
<td>decimal</td>
<td>The points multiplier customers earn for reaching this tier</td>
</tr>
<tr>
<td>rank</td>
<td>int</td>
<td>This tiers rank compared to all other tiers.  Useful for determining order.</td>
</tr>
</tbody></table>

<h2 id="show-popups">Show Popups</h2>

<h4 id="swellapi-showpopupbytype-type">swellAPI.showPopupByType(type)</h4>

<p>This method will show any of the designed popups in Swell by type. Use this if you are using the designed popups and want to show them programmatically.  The following types are possible:</p>

<pre class="highlight javascript"><code>  <span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s2">"swell:setup"</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="nx">swellAPI</span><span class="p">.</span><span class="nx">showPopupByType</span><span class="p">(</span><span class="s2">"RewardsPopup"</span><span class="p">);</span>
  <span class="p">});</span>
</code></pre>

<h4 id="rewardspopup">RewardsPopup  ­</h4>

<p>The standard rewards popup that customers use to earn points, redeem points, manage referral program, view history, and read faqs. You can configure it in the Rewards Popup section of the Swell Admin.</p>

<h4 id="emailcapturepopup">EmailCapturePopup</h4>

<p>This popup is used to collect email addresses for your newsletter. You can configure and design it in the Newsletter Signup section of the Swell Admin.</p>

<h4 id="referrallinkpopup">ReferralLinkPopup</h4>

<p>This popup is used by customers to view and share their referral link via social media and email. You can configure and design it in the Referral Program section of the Swell Admin.</p>

<h4 id="historypopup">HistoryPopup  ­</h4>

<p>This popup is used to view all point earning and redemption activity. It will also display any coupon codes earned by the customer.</p>

<h2 id="capture-newsletter-signup">Capture Newsletter Signup</h2>

<pre class="highlight javascript"><code>
  <span class="c1">// probably not the best example but simple way to accomplish capture</span>
  <span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s2">"swell:setup"</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="kd">var</span> <span class="nx">existingEmailField</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#my-esp-email-field"</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">existingSubmitBtn</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#my-esp-submit-btn"</span><span class="p">);</span>

    <span class="nx">$</span><span class="p">(</span><span class="nx">existingSubmitBtn</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
      <span class="kd">var</span> <span class="nx">email</span> <span class="o">=</span> <span class="nx">existingEmailField</span><span class="p">.</span><span class="nx">val</span><span class="p">();</span>
      <span class="nx">swellAPI</span><span class="p">.</span><span class="nx">captureNewsletterSignup</span><span class="p">(</span><span class="nx">email</span><span class="p">);</span>
    <span class="p">});</span>
  <span class="p">});</span>

  <span class="c1">// ideally your ESP would emit an event when capture was successful</span>
  <span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s2">"swell:setup"</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s2">"esp:captured:email"</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">email</span><span class="p">){</span>
      <span class="nx">swellAPI</span><span class="p">.</span><span class="nx">captureNewsletterSignup</span><span class="p">(</span><span class="nx">email</span><span class="p">);</span>
    <span class="p">});</span>
  <span class="p">})</span>
</code></pre>

<h4 id="swellapi-capturenewslettersignup-email-successcb-errorcb">swellAPI.captureNewsletterSignup(email, successCB, errorCB)</h4>

<p>This method takes an email address to capture and will record it as having participated in the newsletter signup campaign.  This is useful if you want to use an existing newsletter signup form but still record the capture in Swell.</p>

<h2 id="send-referral-emails">Send Referral Emails</h2>

<h3 id="swellapi-identifyreferrer">swellAPI.identifyReferrer()</h3>

<pre class="highlight javascript"><code>
<span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s2">"swell:setup"</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">customersInput</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#customers-input"</span><span class="p">);</span>
  <span class="kd">var</span> <span class="nx">sendEmailBtn</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#customers-send-btn"</span><span class="p">);</span>

  <span class="nx">$</span><span class="p">(</span><span class="nx">sendEmailBtn</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">onSuccess</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">$</span><span class="p">(</span><span class="s2">"#success"</span><span class="p">).</span><span class="nx">show</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="nx">onError</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">$</span><span class="p">(</span><span class="s2">"#error"</span><span class="p">).</span><span class="nx">show</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="nx">swellAPI</span><span class="p">.</span><span class="nx">identifyReferrer</span><span class="p">(</span><span class="nx">email</span><span class="p">,</span> <span class="nx">onSuccess</span><span class="p">,</span> <span class="nx">onError</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">})</span>

</code></pre>

<p>This method takes an email address as a string to identify the email to attribute referred emails to. This is useful if you are building a custom referral program experience in which logged out customers can still participate.</p>

<h4 id="parameters">Parameters</h4>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>email</td>
<td>string</td>
<td>The email address of the customer who will be referring</td>
</tr>
<tr>
<td>onSuccess</td>
<td>function</td>
<td>The function to be called if the email is sent successfully</td>
</tr>
<tr>
<td>onError</td>
<td>function</td>
<td>The function to be called if the email is sent unsuccessfully</td>
</tr>
</tbody></table>

<h3 id="swellapi-sendreferralemails">swellAPI.sendReferralEmails()</h3>

<pre class="highlight javascript"><code>
  <span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s2">"swell:setup"</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">referredCustomersInput</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#referred-customers-input"</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">sendEmailsBtn</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#referred-customers-send-btn"</span><span class="p">);</span>

    <span class="nx">$</span><span class="p">(</span><span class="nx">sendEmailsBtn</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="c1">// assuming you allowed comma separated email input</span>
      <span class="kd">var</span> <span class="nx">emails</span> <span class="o">=</span> <span class="nx">referredCustomersInput</span><span class="p">.</span><span class="nx">val</span><span class="p">().</span><span class="nx">split</span><span class="p">(</span><span class="s2">","</span><span class="p">);</span>

      <span class="kd">var</span> <span class="nx">onSuccess</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">$</span><span class="p">(</span><span class="s2">"#success"</span><span class="p">).</span><span class="nx">show</span><span class="p">();</span>
      <span class="p">}</span>

      <span class="kd">var</span> <span class="nx">onError</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">$</span><span class="p">(</span><span class="s2">"#error"</span><span class="p">).</span><span class="nx">show</span><span class="p">();</span>
      <span class="p">}</span>

      <span class="nx">swellAPI</span><span class="p">.</span><span class="nx">sendReferralEmails</span><span class="p">(</span><span class="nx">emails</span><span class="p">,</span><span class="nx">onSuccess</span><span class="p">,</span> <span class="nx">onError</span><span class="p">);</span>

    <span class="p">});</span>
  <span class="p">});</span>

</code></pre>

<p>This method takes an array of email addresses to send the referral email share email to.  This is useful if you are building a custom referral program experience and want your customer to be able to share his referral link with his or her friends via email.</p>

<h4 id="parameters">Parameters</h4>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>emails</td>
<td>array</td>
<td>An array containing the email addresses of those referred</td>
</tr>
<tr>
<td>onSuccess</td>
<td>function</td>
<td>The function to be called if the email is sent successfully</td>
</tr>
<tr>
<td>onError</td>
<td>function</td>
<td>The function to be called if the email is sent unsuccessfully</td>
</tr>
</tbody></table>

<h2 id="populate-redemption-options">Populate Redemption Options</h2>

<pre class="highlight javascript"><code>
  <span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s2">"swell:setup"</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>

    <span class="c1">// default option template</span>
    <span class="nx">swellAPI</span><span class="p">.</span><span class="nx">populateSelectWithRedemptionOptions</span><span class="p">(</span><span class="s2">"select#redemption-options"</span><span class="p">);</span>

    <span class="c1">// customize option template</span>
    <span class="kd">var</span> <span class="nx">tmpl</span> <span class="o">=</span> <span class="s1">'&lt;option class="redemption-option" value="{{id}}"&gt;{{name}} for {{costText}}&lt;/option&gt;'</span><span class="p">;</span>
    <span class="nx">swellAPI</span><span class="p">.</span><span class="nx">populateSelectWithRedemptionOptions</span><span class="p">(</span><span class="s2">"select#redemption-options"</span><span class="p">,</span> <span class="nx">tmpl</span><span class="p">);</span>
  <span class="p">})</span>
</code></pre>

<h4 id="swellapi-popuplateselectwithredemptionoptions-selectelselector-optiontempate">swellAPI.popuplateSelectWithRedemptionOptions(selectElSelector, optionTempate)</h4>

<p>This method takes a select element selector and appends <code class="prettyprint">&lt;option&gt;</code> elements for each redemption option.  You could do this yourself using swellAPI.getActiveRedemptionOptions() but this makes it a little simpler.</p>

<p>optionTemplate is an optional template string that uses {{key}} to dictate where to replace redemption option values.  The default string is <code class="prettyprint">&lt;option value=&quot;{{id}}&quot;&gt;{{name}} ({{costText}})&lt;/option&gt;</code></p>

<h2 id="make-redemption">Make Redemption</h2>

<pre class="highlight javascript"><code>  <span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s2">"swell:setup"</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>

    <span class="kd">var</span> <span class="nx">redemptionOptionSelect</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#redemption-option-select"</span><span class="p">);</span>

    <span class="kd">var</span> <span class="nx">onSuccess</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">redemption</span><span class="p">){</span> <span class="nx">fillAndSubmitCouponCodeForm</span><span class="p">(</span><span class="nx">redemption</span><span class="p">.</span><span class="nx">couponCode</span><span class="p">);</span> <span class="p">}</span>
    <span class="kd">var</span> <span class="nx">onError</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#error"</span><span class="p">).</span><span class="nx">show</span><span class="p">();</span> <span class="p">}</span>

    <span class="nx">swellAPI</span><span class="p">.</span><span class="nx">makeRedemption</span><span class="p">({</span><span class="na">redemptionOptionId</span><span class="p">:</span> <span class="nx">redemptionOptionSelect</span><span class="p">.</span><span class="nx">val</span><span class="p">()</span> <span class="p">},</span> <span class="nx">onSuccess</span><span class="p">,</span> <span class="nx">onError</span><span class="p">);</span>
  <span class="p">});</span>
</code></pre>

<h4 id="swellapi-makeredemption-opts-successcb-errorcb">swellAPI.makeRedemption(opts, successCB, errorCB)</h4>

<p>This method is used to redeem a customer&rsquo;s points for a discount.  You need to pass the redemptionOptionId of the redemption option they wish to redeem.  If successful the points will be deducted from the customer&rsquo;s account.  You can optionally pass a boolean <code class="prettyprint">delayPointDeduction</code> set to true to wait until the coupon is used in an order to remove the points.</p>

<p>The redemption object is passed back to the successCB which has information about the discount code (if applicable) that was generated.</p>

<h4 id="options">Options</h4>

<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>redemptionOptionId</td>
<td>int</td>
<td>The redemption option id that is being redeemed.</td>
</tr>
<tr>
<td>delayPointDeduction</td>
<td>boolean</td>
<td>(optional, defauls to false) if true points are not deducted until after the order is placed.</td>
</tr>
</tbody></table>

<h4 id="redemption-object">Redemption Object</h4>

<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>couponCode</td>
<td>string</td>
<td>The coupon code for this discount</td>
</tr>
<tr>
<td>pointsUsed</td>
<td>int</td>
<td>The amount of points used for this redemption</td>
</tr>
<tr>
<td>appliesToId</td>
<td>int</td>
<td>The product, variant, or collection id this discount can be used for</td>
</tr>
<tr>
<td>discountType</td>
<td>string</td>
<td>A string representing the type of discount this redemption was for.  Possible values include: fixed_amount, percentage, variable, shipping, product.</td>
</tr>
<tr>
<td>discountRateCents</td>
<td>int</td>
<td>If converting points to fixed dollar discount this is the conversion rate used in cents per point.</td>
</tr>
<tr>
<td>redemptionOptionId</td>
<td>int</td>
<td>The redemption option that was used to generate this redemption.</td>
</tr>
</tbody></table>

<h2 id="convert-points-to-dollars">Convert Points to Dollars</h2>

<h4 id="swellapi-convertpointstodiscount-opts-successcb-errorcb">swellAPI.convertPointsToDiscount(opts, successCB, errorCB)</h4>

<pre class="highlight javascript"><code>
  <span class="c1">// let customer enter how many to redeem</span>
  <span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s2">"swell:setup"</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="kd">var</span> <span class="nx">amountToRedeem</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#redemption-amount-input"</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>

    <span class="kd">var</span> <span class="nx">onSuccess</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">redemption</span><span class="p">){</span> <span class="nx">fillAndSubmitCouponCodeForm</span><span class="p">(</span><span class="nx">redemption</span><span class="p">.</span><span class="nx">couponCode</span><span class="p">);</span> <span class="p">}</span>
    <span class="kd">var</span> <span class="nx">onError</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#error"</span><span class="p">).</span><span class="nx">show</span><span class="p">();</span> <span class="p">}</span>

    <span class="nx">swellAPI</span><span class="p">.</span><span class="nx">convertPointsToDiscount</span><span class="p">({</span><span class="na">amount</span><span class="p">:</span> <span class="nx">amountToRedeem</span><span class="p">},</span> <span class="nx">onSuccess</span><span class="p">,</span> <span class="nx">onError</span><span class="p">);</span>
  <span class="p">});</span>

  <span class="c1">// redeem all of their points</span>
  <span class="c1">// in reality you'd likely want to make sure you aren't redeeming a larger discount</span>
  <span class="c1">// than the current cart total as to not waste points</span>
  <span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s2">"swell:setup"</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="kd">var</span> <span class="nx">details</span> <span class="o">=</span> <span class="nx">swellAPI</span><span class="p">.</span><span class="nx">getCustomerDetails</span><span class="p">();</span>

    <span class="kd">var</span> <span class="nx">onSuccess</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">redemption</span><span class="p">){</span> <span class="nx">fillAndSubmitCouponCodeForm</span><span class="p">(</span><span class="nx">redemption</span><span class="p">.</span><span class="nx">couponCode</span><span class="p">);</span> <span class="p">}</span>
    <span class="kd">var</span> <span class="nx">onError</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#error"</span><span class="p">).</span><span class="nx">show</span><span class="p">();</span> <span class="p">}</span>

    <span class="nx">swellAPI</span><span class="p">.</span><span class="nx">convertPointsToDiscount</span><span class="p">({</span><span class="na">amount</span><span class="p">:</span> <span class="nx">details</span><span class="p">.</span><span class="nx">pointsBalance</span><span class="p">},</span> <span class="nx">onSuccess</span><span class="p">,</span> <span class="nx">onError</span><span class="p">);</span>
  <span class="p">});</span>
</code></pre>

<p>This method is used to redeem a customers points for a fixed discount at some predetermined conversion rate set in your Swell admin.  For example if you setup a redemption rate of 5 cents per point then you could redeem 20 points for a $1 discount code.  If successful the points will be deducted from the customer&rsquo;s account.  You can optionally pass a boolean <code class="prettyprint">delayPointDeduction</code> set to true to wait until the coupon is used in an order to remove the points.</p>

<h4 id="options">Options</h4>

<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>amount</td>
<td>int</td>
<td>The number of points to redeem</td>
</tr>
<tr>
<td>delayPointDeduction</td>
<td>boolean</td>
<td>(optional, defauls to false) if true points are not deducted until after the order is placed.</td>
</tr>
</tbody></table>

<h4 id="redemption-object">Redemption Object</h4>

<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>couponCode</td>
<td>string</td>
<td>The coupon code for this discount</td>
</tr>
<tr>
<td>pointsUsed</td>
<td>int</td>
<td>The amount of points used for this redemption</td>
</tr>
<tr>
<td>appliesToId</td>
<td>int</td>
<td>The product, variant, or collection id this discount can be used for</td>
</tr>
<tr>
<td>discountType</td>
<td>string</td>
<td>A string representing the type of discount this redemption was for.  Possible values include: fixed_amount, percentage, variable, shipping, product.</td>
</tr>
<tr>
<td>discountRateCents</td>
<td>int</td>
<td>If converting points to fixed dollar discount this is the conversion rate used in cents per point.</td>
</tr>
<tr>
<td>redemptionOptionId</td>
<td>int</td>
<td>The redemption option that was used to generate this redemption.</td>
</tr>
</tbody></table>

          <h1 id="api">API</h1>

<h2 id="introduction">Introduction</h2>

<p>Swell provides a simple and powerful REST API to integrate rewards into your business or application.</p>

<p>This API reference provides information on available endpoints and how to interact with them. If you have questions or need additional help feel free to reach out to our engineering team at <a href="mailto:eng@swellrewards.com">eng@swellrewards.com</a>.</p>

<h2 id="authentication">Authentication</h2>

<p>Swell uses a combination of a <code>merchant_id</code> and <code>api_key</code> to authenticate requests.  You can find this information in the Settings page of your Swell account.  Swell expects for both <code>merchant_id</code> and <code>api_key</code> to be included in all API requests and can be passed as request parameters or as HTTP headers.  </p>

<h2 id="actions">Actions</h2>

<h3 id="record-a-customer-action">Record a customer action</h3>
<pre class="highlight ruby"><code><span class="nb">require</span> <span class="s1">'faraday'</span>

<span class="n">action</span> <span class="o">=</span> <span class="no">Hash</span><span class="p">.</span><span class="nf">new</span>
<span class="n">action</span><span class="p">[</span><span class="ss">:type</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"CustomAction"</span>
<span class="n">action</span><span class="p">[</span><span class="ss">:customer_email</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"john@example.com"</span>
<span class="n">action</span><span class="p">[</span><span class="ss">:action_name</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"completed_survey"</span>

<span class="c1"># add authentication params (could also use headers)</span>
<span class="n">action</span><span class="p">[</span><span class="ss">:merchant_id</span><span class="p">]</span> <span class="o">=</span> <span class="mi">12345</span>
<span class="n">action</span><span class="p">[</span><span class="ss">:api_key</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"MY_API_KEY"</span>

<span class="n">conn</span> <span class="o">=</span> <span class="no">Faraday</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="ss">:url</span> <span class="o">=&gt;</span> <span class="s2">"https://app.swellrewards.com"</span><span class="p">)</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">conn</span><span class="p">.</span><span class="nf">post</span> <span class="k">do</span> <span class="o">|</span><span class="n">req</span><span class="o">|</span>
  <span class="n">req</span><span class="p">.</span><span class="nf">url</span> <span class="s2">"/api/v2/actions"</span>
  <span class="n">req</span><span class="p">.</span><span class="nf">headers</span><span class="p">[</span><span class="s1">'Content-Type'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'application/json'</span>
  <span class="n">req</span><span class="p">.</span><span class="nf">body</span> <span class="o">=</span> <span class="n">action</span><span class="p">.</span><span class="nf">to_json</span>
<span class="k">end</span>

</code></pre>

<p>This endpoint records an action performed by a customer.  It will apply the action to all matching active campaigns and award the necessary points and/or discounts.</p>

<h4 id="http-request">HTTP Request</h4>

<p><code class="prettyprint">POST https://app.swellrewards.com/api/v2/actions</code></p>

<h4 id="query-parameters">Query Parameters</h4>

<table><thead>
<tr>
<th>Parameters</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>type</td>
<td>string</td>
<td>The type of action.  Almost always set this to <code>&quot;CustomAction&quot;</code></td>
</tr>
<tr>
<td>customer_email</td>
<td>string</td>
<td>The email address used to identify the customer who performed the action.</td>
</tr>
<tr>
<td>action_name</td>
<td>string</td>
<td>The name of the action that was performed.  This must match the name set for one of your Custom Action Campaigns.</td>
</tr>
<tr>
<td>ip_address</td>
<td>string (optional)</td>
<td>The ip address of the user when the action was performed.  This is required if this action completes a referral program requirement.</td>
</tr>
<tr>
<td>user_agent</td>
<td>string (optional)</td>
<td>The browser user agent of the user when the action was performed.  This is strongly recommended if this action completes a referral program requirements.</td>
</tr>
<tr>
<td>created_at</td>
<td>datetime (optional)</td>
<td>The time the action was performed.  This will default to the current time.  Use this if you need to back date an action.</td>
</tr>
<tr>
<td>reward_points</td>
<td>int (optional)</td>
<td>Use this to override the normal amount of points awarded for performing the action.  Will default to the rules of the campaign otherwise.</td>
</tr>
<tr>
<td>history_title</td>
<td>string (optional)</td>
<td>Use this to override the normal description shown to the user in their history.  Will default to the campaign settings otherwise.</td>
</tr>
</tbody></table>

<h2 id="customers">Customers</h2>

<h3 id="create-and-update-customer-records">Create and update customer records</h3>
<pre class="highlight ruby"><code><span class="nb">require</span> <span class="s1">'faraday'</span>

<span class="n">customer</span> <span class="o">=</span> <span class="no">Hash</span><span class="p">.</span><span class="nf">new</span>
<span class="n">customer</span><span class="p">[</span><span class="ss">:id</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"CUS_1231H9UQOW9H23"</span>
<span class="n">customer</span><span class="p">[</span><span class="ss">:email</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"john@example.com"</span>
<span class="n">customer</span><span class="p">[</span><span class="ss">:first_name</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"John"</span>
<span class="n">customer</span><span class="p">[</span><span class="ss">:last_name</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"Smith"</span>

<span class="c1"># add authentication params (could also use headers)</span>
<span class="n">customer</span><span class="p">[</span><span class="ss">:merchant_id</span><span class="p">]</span> <span class="o">=</span> <span class="mi">12345</span>
<span class="n">customer</span><span class="p">[</span><span class="ss">:api_key</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"MY_API_KEY"</span>

<span class="n">conn</span> <span class="o">=</span> <span class="no">Faraday</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="ss">:url</span> <span class="o">=&gt;</span> <span class="s2">"https://app.swellrewards.com"</span><span class="p">)</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">conn</span><span class="p">.</span><span class="nf">post</span> <span class="k">do</span> <span class="o">|</span><span class="n">req</span><span class="o">|</span>
  <span class="n">req</span><span class="p">.</span><span class="nf">url</span> <span class="s2">"/api/v2/customers"</span>
  <span class="n">req</span><span class="p">.</span><span class="nf">headers</span><span class="p">[</span><span class="s1">'Content-Type'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'application/json'</span>
  <span class="n">req</span><span class="p">.</span><span class="nf">body</span> <span class="o">=</span> <span class="n">customer</span><span class="p">.</span><span class="nf">to_json</span>
<span class="k">end</span>

</code></pre>

<p>This endpoint both creates and updates a customer&rsquo;s record in our system.  Use this primarily to notify us when you add a customer manually in your admin or a customer changes their email address.</p>

<h4 id="http-request">HTTP Request</h4>

<p><code class="prettyprint">POST https://app.swellrewards.com/api/v2/customers</code></p>

<h4 id="query-parameters">Query Parameters</h4>

<table><thead>
<tr>
<th>Parameters</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>string</td>
<td>The identifier used to uniquely identify the customer in your system.</td>
</tr>
<tr>
<td>email</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>first_name</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>last_name</td>
<td>string</td>
<td></td>
</tr>
</tbody></table>

<h3 id="fetch-customer-details">Fetch customer details</h3>
<pre class="highlight ruby"><code><span class="nb">require</span> <span class="s1">'faraday'</span>

<span class="n">customer_data</span> <span class="o">=</span> <span class="no">Hash</span><span class="p">.</span><span class="nf">new</span>

<span class="n">customer_data</span><span class="p">[</span><span class="ss">:customer_email</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"john@example.com"</span>

<span class="c1"># add authentication params (could also use headers)</span>
<span class="n">customer_data</span><span class="p">[</span><span class="ss">:merchant_id</span><span class="p">]</span> <span class="o">=</span> <span class="mi">12345</span>
<span class="n">customer_data</span><span class="p">[</span><span class="ss">:api_key</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"MY_API_KEY"</span>

<span class="n">connection</span> <span class="o">=</span> <span class="no">Faraday</span><span class="p">.</span><span class="nf">new</span> <span class="s2">"https://app.swellrewards.com"</span> <span class="k">do</span> <span class="o">|</span><span class="n">conn</span><span class="o">|</span>
  <span class="n">conn</span><span class="p">.</span><span class="nf">response</span> <span class="ss">:json</span><span class="p">,</span> <span class="ss">:content_type</span> <span class="o">=&gt;</span> <span class="s1">'application/json'</span>
<span class="k">end</span>

<span class="n">customer</span> <span class="o">=</span> <span class="n">connection</span><span class="p">.</span><span class="nf">get</span> <span class="s2">"/api/v2/customers"</span><span class="p">,</span> <span class="n">customer_data</span>

<span class="nb">puts</span> <span class="n">customer</span><span class="p">.</span><span class="nf">body</span><span class="p">[</span><span class="s2">"points_balance"</span><span class="p">]</span>
<span class="nb">puts</span> <span class="n">customer</span><span class="p">.</span><span class="nf">body</span><span class="p">[</span><span class="s2">"points_earned"</span><span class="p">]</span>
<span class="nb">puts</span> <span class="n">customer</span><span class="p">.</span><span class="nf">body</span><span class="p">[</span><span class="s2">"referral_code"</span><span class="p">][</span><span class="s2">"code"</span><span class="p">]</span>

</code></pre>

<p>This endpoint returns a Swell customer record.  Most commonly used to fetch a customer&rsquo;s point balance and unique referral link.</p>

<h4 id="http-request">HTTP Request</h4>

<p><code class="prettyprint">GET https://app.swellrewards.com/api/v2/customers?customer_email=john@example.com</code></p>

<h4 id="query-parameters">Query Parameters</h4>

<table><thead>
<tr>
<th>Parameters</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>customer_id</td>
<td>string</td>
<td>The identifier used to uniquely identify the customer in your system. Required if no customer_email is passed.</td>
</tr>
<tr>
<td>customer_email</td>
<td>string</td>
<td>The customer&rsquo;s email address.  Required if no customer_id is passed.</td>
</tr>
<tr>
<td>with_referral_code</td>
<td>boolean</td>
<td>Defaults to false.  If you&rsquo;d like information about the customers referral code you can set this to true.</td>
</tr>
<tr>
<td>with_history</td>
<td>boolean</td>
<td>Defaults to false.  If you&rsquo;d like information about the customers point earning and redemption history you can set this to true.</td>
</tr>
</tbody></table>

<blockquote>
<p>The above returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"thirty_party_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CUS_1231H9UQOW9H23"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"John"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Smith"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"john@example.com"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"points_balance"</span><span class="p">:</span><span class="w"> </span><span class="mi">455</span><span class="p">,</span><span class="w">
  </span><span class="nt">"points_earned"</span><span class="p">:</span><span class="w"> </span><span class="mi">850</span><span class="p">,</span><span class="w">
  </span><span class="nt">"total_spend_cents"</span><span class="p">:</span><span class="w"> </span><span class="mi">251200</span><span class="p">,</span><span class="w">
  </span><span class="nt">"total_purchases"</span><span class="p">:</span><span class="w"> </span><span class="mi">8</span><span class="p">,</span><span class="w">
  </span><span class="nt">"perks_redeemed"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
  </span><span class="nt">"last_purchase_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-09-10T13:44:15.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"points_expire_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-12-15T18:41:13.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"last_seen_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-09-10T18:41:13.000Z"</span><span class="p">,</span><span class="w">

  </span><span class="nt">"referral_code"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ABC123"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"total_clicks"</span><span class="p">:</span><span class="w"> </span><span class="mi">6123</span><span class="p">,</span><span class="w">
    </span><span class="nt">"shares"</span><span class="p">:</span><span class="w"> </span><span class="mi">1231</span><span class="p">,</span><span class="w">
    </span><span class="nt">"facebook_shares"</span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="p">,</span><span class="w">
    </span><span class="nt">"twitter_shares"</span><span class="p">:</span><span class="w"> </span><span class="mi">150</span><span class="p">,</span><span class="w">
    </span><span class="nt">"email_shares"</span><span class="p">:</span><span class="w"> </span><span class="mi">180</span><span class="p">,</span><span class="w">
    </span><span class="nt">"emails_sent"</span><span class="p">:</span><span class="w"> </span><span class="mi">400</span><span class="p">,</span><span class="w">
    </span><span class="nt">"unique_clicks"</span><span class="p">:</span><span class="w"> </span><span class="mi">4124</span><span class="p">,</span><span class="w">
    </span><span class="nt">"links_clicked_from_email"</span><span class="p">:</span><span class="w"> </span><span class="mi">123</span><span class="p">,</span><span class="w">
    </span><span class="nt">"links_clicked_from_twitter"</span><span class="p">:</span><span class="w"> </span><span class="mi">1231</span><span class="p">,</span><span class="w">
    </span><span class="nt">"links_clicked_from_facebook"</span><span class="p">:</span><span class="w"> </span><span class="mi">332</span><span class="p">,</span><span class="w">
    </span><span class="nt">"orders"</span><span class="p">:</span><span class="w"> </span><span class="mi">21</span><span class="p">,</span><span class="w">
    </span><span class="nt">"amount_cents"</span><span class="p">:</span><span class="w"> </span><span class="mi">32423</span><span class="p">,</span><span class="w">
    </span><span class="nt">"average_amount_cents"</span><span class="p">:</span><span class="w"> </span><span class="mi">4350</span><span class="p">,</span><span class="w">
    </span><span class="nt">"expires_at"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"expired"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nt">"completed_referral_customers"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sally@example.com"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Sally"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Jane"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">},</span><span class="w">

  </span><span class="nt">"history_items"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-06-28T18:41:13.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-06-28"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"action"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Create an Account"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"points"</span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="p">,</span><span class="w">
      </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Approved"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-08-28T18:41:13.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-06-28"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"action"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Complete our Survey"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"points"</span><span class="p">:</span><span class="w"> </span><span class="mi">150</span><span class="p">,</span><span class="w">
      </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Approved"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-08-28T18:41:13.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-06-28"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"action"</span><span class="p">:</span><span class="w"> </span><span class="s2">"$5 Coupon"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"points"</span><span class="p">:</span><span class="w"> </span><span class="mi">-250</span><span class="p">,</span><span class="w">
      </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FIVEOFF-XYZ"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre>

<h2 id="point-redemptions">Point Redemptions</h2>

<h3 id="create-a-redemption">Create a redemption</h3>
<pre class="highlight ruby"><code><span class="nb">require</span> <span class="s1">'faraday'</span>

<span class="n">redemption</span> <span class="o">=</span> <span class="no">Hash</span><span class="p">.</span><span class="nf">new</span>
<span class="n">redemption</span><span class="p">[</span><span class="ss">:customer_external_id</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"CUS_1231H9UQOW9H23"</span>
<span class="n">redemption</span><span class="p">[</span><span class="ss">:customer_email</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"john@example.com"</span>
<span class="n">redemption</span><span class="p">[</span><span class="ss">:redemption_option_id</span><span class="p">]</span> <span class="o">=</span> <span class="mi">12345</span>

<span class="c1"># add authentication params (could also use headers)</span>
<span class="n">redemption</span><span class="p">[</span><span class="ss">:merchant_id</span><span class="p">]</span> <span class="o">=</span> <span class="mi">12345</span>
<span class="n">redemption</span><span class="p">[</span><span class="ss">:api_key</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"MY_API_KEY"</span>

<span class="n">conn</span> <span class="o">=</span> <span class="no">Faraday</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="ss">:url</span> <span class="o">=&gt;</span> <span class="s2">"https://app.swellrewards.com"</span><span class="p">)</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">conn</span><span class="p">.</span><span class="nf">post</span> <span class="k">do</span> <span class="o">|</span><span class="n">req</span><span class="o">|</span>
  <span class="n">req</span><span class="p">.</span><span class="nf">url</span> <span class="s2">"/api/v2/redemptions"</span>
  <span class="n">req</span><span class="p">.</span><span class="nf">headers</span><span class="p">[</span><span class="s1">'Content-Type'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'application/json'</span>
  <span class="n">req</span><span class="p">.</span><span class="nf">body</span> <span class="o">=</span> <span class="n">redemption</span><span class="p">.</span><span class="nf">to_json</span>
<span class="k">end</span>

</code></pre>

<p>This endpoint will redeem a customer&rsquo;s points for a particular redemption option.  It will check to ensure the customer is eligible and has enough points for the selected redemption option and then it will deduct the points from their balance, generate the coupon code, and return it in the response.</p>

<h4 id="http-request">HTTP Request</h4>

<p><code class="prettyprint">POST https://app.swellrewards.com/api/v2/redemptions</code></p>

<h4 id="query-parameters">Query Parameters</h4>

<table><thead>
<tr>
<th>Parameters</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>customer_external_id</td>
<td>string</td>
<td>The identifier used to uniquely identify the customer in your system.</td>
</tr>
<tr>
<td>customer_email</td>
<td>string</td>
<td>The email address of the customer redeeming points.</td>
</tr>
<tr>
<td>redemption_option_id</td>
<td>int</td>
<td>The unique identifier of the redemption option being redeemed.</td>
</tr>
</tbody></table>

<blockquote>
<p>The above returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">12345</span><span class="p">,</span><span class="w">
  </span><span class="nt">"reward_text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FIVEOFF-ABC123"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"approved"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nt">"approved_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-08-14T18:41:13.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-08-14T18:41:13.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-08-14T18:41:13.000Z"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre>

<h2 id="campaigns">Campaigns</h2>

<h3 id="get-active-campaigns">Get active campaigns</h3>
<pre class="highlight ruby"><code><span class="nb">require</span> <span class="s1">'faraday'</span>

<span class="n">params</span> <span class="o">=</span> <span class="no">Hash</span><span class="p">.</span><span class="nf">new</span>

<span class="c1"># add authentication params (could also use headers)</span>
<span class="n">params</span><span class="p">[</span><span class="ss">:merchant_id</span><span class="p">]</span> <span class="o">=</span> <span class="mi">12345</span>
<span class="n">params</span><span class="p">[</span><span class="ss">:api_key</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"MY_API_KEY"</span>

<span class="n">connection</span> <span class="o">=</span> <span class="no">Faraday</span><span class="p">.</span><span class="nf">new</span> <span class="s2">"https://app.swellrewards.com"</span> <span class="k">do</span> <span class="o">|</span><span class="n">conn</span><span class="o">|</span>
  <span class="n">conn</span><span class="p">.</span><span class="nf">response</span> <span class="ss">:json</span><span class="p">,</span> <span class="ss">:content_type</span> <span class="o">=&gt;</span> <span class="s1">'application/json'</span>
<span class="k">end</span>

<span class="n">campaigns</span> <span class="o">=</span> <span class="n">connection</span><span class="p">.</span><span class="nf">get</span> <span class="s2">"/api/v2/campaigns"</span><span class="p">,</span> <span class="n">params</span>

</code></pre>

<p>This endpoint returns a list of campaigns available for customers to participate in.  If you provide a particular customer we can return their current status and eligibility on each of the campaigns.</p>

<h4 id="http-request">HTTP Request</h4>

<p><code class="prettyprint">GET https://app.swellrewards.com/api/v2/campaigns</code></p>

<h4 id="query-parameters">Query Parameters</h4>

<table><thead>
<tr>
<th>Parameters</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>with_status</td>
<td>boolean (optional)</td>
<td>Defaults to false.  Enable to get a particular customer&rsquo;s status for each campaign. Either customer_id or customer_email are required for this to work.</td>
</tr>
<tr>
<td>customer_id</td>
<td>string (optional)</td>
<td>The id used to identify the customer.</td>
</tr>
<tr>
<td>customer_email</td>
<td>string (optional)</td>
<td>The email address used to identify the customer.</td>
</tr>
</tbody></table>

<blockquote>
<p>The above returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">[{</span><span class="w">
  </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">12345</span><span class="p">,</span><span class="w">
  </span><span class="nt">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Tweet About Us"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"details"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Tweet about us and earn 100 points."</span><span class="p">,</span><span class="w">
  </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"TwitterTweetCampaign"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"cta_text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Send Tweet"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"share_text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SwellRewards is the coolest company, we love them."</span><span class="p">,</span><span class="w">
  </span><span class="nt">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://app.swellrewards.com"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"username"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nt">"entity_id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nt">"icon"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fa-twitter"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"reward_text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100 Points"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"expires_at"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nt">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-08-14T18:41:13.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-08-14T18:41:13.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"max_completions_per_user"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="nt">"min_actions_required"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"global_completions_left"</span><span class="p">:</span><span class="w"> </span><span class="mi">10000</span><span class="p">,</span><span class="w">
    </span><span class="nt">"customer_actions_completed"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nt">"customer_times_completed"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nt">"customer_minutes_until_next_action"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nt">"customer_minutes_until_next_completion"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">},</span><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">12346</span><span class="p">,</span><span class="w">
  </span><span class="nt">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Follow Us On Instagram"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"details"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Follow us on instagram and earn 250 points."</span><span class="p">,</span><span class="w">
  </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"InstagramFollowCampaign"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"cta_text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Follow @SwellRewards"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"share_text"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nt">"url"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nt">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SwellRewards"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"entity_id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nt">"icon"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fa-instagram"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"reward_text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"250 Points"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"expires_at"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nt">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-08-14T18:41:13.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-08-14T18:41:13.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"max_completions_per_user"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="nt">"min_actions_required"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"global_completions_left"</span><span class="p">:</span><span class="w"> </span><span class="mi">10000</span><span class="p">,</span><span class="w">
    </span><span class="nt">"customer_actions_completed"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nt">"customer_times_completed"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nt">"customer_minutes_until_next_action"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nt">"customer_minutes_until_next_completion"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}]</span><span class="w">

</span></code></pre>

<h4 id="response-campaign-parameters">Response Campaign Parameters</h4>

<table><thead>
<tr>
<th>Parameters</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>int</td>
<td>unique campaign id.</td>
</tr>
<tr>
<td>title</td>
<td>string</td>
<td>campaign headline, 1-liner.</td>
</tr>
<tr>
<td>details</td>
<td>string</td>
<td>information on how to complete the campaign.</td>
</tr>
<tr>
<td>type</td>
<td>string</td>
<td>One of the various campaign types, such as SpendBasedCampaign, TransactionBasedCampaign, ReferralCampaign, TwitterRetweetCampaign, InstagramFollowCampaign, TwitterTweetCampaign, TwitterFollowCampaign, etc.</td>
</tr>
<tr>
<td>cta_text</td>
<td>string</td>
<td>the text found on the button to participate in the campaign (e.g. &ldquo;Tweet&rdquo;, &ldquo;Follow&rdquo;, etc).</td>
</tr>
<tr>
<td>share_text</td>
<td>string</td>
<td>message to be shared on social media, used in the TwitterTweetCampaign.</td>
</tr>
<tr>
<td>url</td>
<td>string</td>
<td>campaign dependent. sometimes a destination to link to from cta button, for TwitterTweet it&rsquo;s a url to be included in the tweet.</td>
</tr>
<tr>
<td>username</td>
<td>string</td>
<td>campaign dependent. For TwitterFollowCampaign it&rsquo;s the twitter handle to follow.</td>
</tr>
<tr>
<td>entity_id</td>
<td>string</td>
<td>campaign dependent. For TwitterRetweetCampaign it&rsquo;s the tweet id to retweet.</td>
</tr>
<tr>
<td>icon</td>
<td>string</td>
<td>image used for campaign. if it&rsquo;s a url then it&rsquo;s an image otherwise it&rsquo;s a font awesome class name.</td>
</tr>
<tr>
<td>reward_text</td>
<td>string</td>
<td>describes what the customer gets for completing (e.g. &ldquo;500 Points&rdquo;).</td>
</tr>
<tr>
<td>expires_at</td>
<td>datetime</td>
<td>for limited time promotions, this is when the campaign ends.</td>
</tr>
<tr>
<td>created_at</td>
<td>datetime</td>
<td></td>
</tr>
<tr>
<td>updated_at</td>
<td>datetime</td>
<td></td>
</tr>
<tr>
<td>max_completions_per_user</td>
<td>int</td>
<td>The maximum number of times a single customer can complete this campaign.</td>
</tr>
<tr>
<td>min_actions_required</td>
<td>int</td>
<td>The number of actions (for punch card style campaigns) that are required for the campaign to be completed.</td>
</tr>
</tbody></table>

<h4 id="response-status-parameters">Response Status Parameters</h4>

<table><thead>
<tr>
<th>Parameters</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>global_completions_left</td>
<td>int</td>
<td>Number of times this campaign can be completed globally (for all customers in total).</td>
</tr>
<tr>
<td>customer_actions_completed</td>
<td>int</td>
<td>Number of actions the customer has performed towards this campaign.</td>
</tr>
<tr>
<td>customer_times_completed</td>
<td>int</td>
<td>Number of times the customer has already completed this campaign.</td>
</tr>
<tr>
<td>customer_minutes_until_next_action</td>
<td>int</td>
<td>Number of minutes the customer must wait until they can complete take another action towards completing this campaign.</td>
</tr>
<tr>
<td>customer_minutes_until_next_completion</td>
<td>int</td>
<td>Number of minutes the customer must wait until they are eligible to complete this campaign again.</td>
</tr>
</tbody></table>

<h2 id="redemption-options">Redemption Options</h2>

<h3 id="get-active-redemption-options">Get active redemption options</h3>
<pre class="highlight ruby"><code><span class="nb">require</span> <span class="s1">'faraday'</span>

<span class="n">params</span> <span class="o">=</span> <span class="no">Hash</span><span class="p">.</span><span class="nf">new</span>

<span class="c1"># add authentication params (could also use headers)</span>
<span class="n">params</span><span class="p">[</span><span class="ss">:merchant_id</span><span class="p">]</span> <span class="o">=</span> <span class="mi">12345</span>
<span class="n">params</span><span class="p">[</span><span class="ss">:api_key</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"MY_API_KEY"</span>

<span class="n">connection</span> <span class="o">=</span> <span class="no">Faraday</span><span class="p">.</span><span class="nf">new</span> <span class="s2">"https://app.swellrewards.com"</span> <span class="k">do</span> <span class="o">|</span><span class="n">conn</span><span class="o">|</span>
  <span class="n">conn</span><span class="p">.</span><span class="nf">response</span> <span class="ss">:json</span><span class="p">,</span> <span class="ss">:content_type</span> <span class="o">=&gt;</span> <span class="s1">'application/json'</span>
<span class="k">end</span>

<span class="n">redemption_options</span> <span class="o">=</span> <span class="n">connection</span><span class="p">.</span><span class="nf">get</span> <span class="s2">"/api/v2/redemption_options"</span><span class="p">,</span> <span class="n">params</span>

</code></pre>

<p>This endpoint returns a list of redemption options available for customers to redeem.</p>

<h4 id="http-request">HTTP Request</h4>

<p><code class="prettyprint">GET https://app.swellrewards.com/api/v2/redemption_options</code></p>

<h4 id="query-parameters">Query Parameters</h4>

<table><thead>
<tr>
<th>Parameters</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
</tbody></table>

<p>none required</p>

<blockquote>
<p>The above returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">[{</span><span class="w">
  </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">12345</span><span class="p">,</span><span class="w">
  </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"$5.00 Off"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Get $5 off every item in our store for 500 points."</span><span class="p">,</span><span class="w">
  </span><span class="nt">"icon"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fa-dollar"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"cost_text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"500 Points"</span><span class="w">
</span><span class="p">},</span><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">12346</span><span class="p">,</span><span class="w">
  </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"$10.00 Off"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Get $10 off every item in our store for 1000 points."</span><span class="p">,</span><span class="w">
  </span><span class="nt">"icon"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fa-dollar"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"cost_text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1000 Points"</span><span class="w">
</span><span class="p">}]</span><span class="w">

</span></code></pre>

<h4 id="response-redemption-option-parameters">Response Redemption Option Parameters</h4>

<table><thead>
<tr>
<th>Parameters</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>int</td>
<td>unique identifier</td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td>option title (e.g. $5.00 Off)</td>
</tr>
<tr>
<td>description</td>
<td>string</td>
<td>short description (e.g. Get $5 Off every item in our store for 500 Points)</td>
</tr>
<tr>
<td>icon</td>
<td>string</td>
<td>image if url, otherwise font awesome class name</td>
</tr>
<tr>
<td>cost_text</td>
<td>string</td>
<td>how many points this option costs (e.g. 500 Points)</td>
</tr>
</tbody></table>

<h2 id="orders">Orders</h2>

<h3 id="create-an-order">Create an order</h3>
<pre class="highlight ruby"><code><span class="nb">require</span> <span class="s1">'faraday'</span>

<span class="n">order</span> <span class="o">=</span> <span class="no">Hash</span><span class="p">.</span><span class="nf">new</span>
<span class="n">order</span><span class="p">[</span><span class="ss">:status</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"paid"</span>
<span class="n">order</span><span class="p">[</span><span class="ss">:customer_email</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"john@example.com"</span>
<span class="n">order</span><span class="p">[</span><span class="ss">:total_amount_cents</span><span class="p">]</span> <span class="o">=</span> <span class="mi">150188</span>
<span class="n">order</span><span class="p">[</span><span class="ss">:total_refunded_cents</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">order</span><span class="p">[</span><span class="ss">:currency_code</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"USD"</span>
<span class="n">order</span><span class="p">[</span><span class="ss">:order_id</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"ORD_43H9ADHW1308123"</span>
<span class="n">order</span><span class="p">[</span><span class="ss">:customer_id</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"CUS_1231H9UQOW9H23"</span>
<span class="n">order</span><span class="p">[</span><span class="ss">:coupon_code</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"SAVE5"</span>
<span class="n">order</span><span class="p">[</span><span class="ss">:ip_address</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"127.0.0.1"</span>
<span class="n">order</span><span class="p">[</span><span class="ss">:user_agent</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_11_4) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/52.0.2743.116 Safari/537.36"</span>
<span class="n">order</span><span class="p">[</span><span class="ss">:shipping_amount_cents</span><span class="p">]</span> <span class="o">=</span> <span class="mi">538</span>
<span class="n">order</span><span class="p">[</span><span class="ss">:discount_amount_cents</span><span class="p">]</span> <span class="o">=</span> <span class="mi">500</span>
<span class="n">order</span><span class="p">[</span><span class="ss">:tax_amount_cents</span><span class="p">]</span> <span class="o">=</span> <span class="mi">350</span>

<span class="n">order</span><span class="p">[</span><span class="ss">:billing_address</span><span class="p">]</span> <span class="o">=</span> <span class="no">Hash</span><span class="p">.</span><span class="nf">new</span>
<span class="n">order</span><span class="p">[</span><span class="ss">:billing_address</span><span class="p">][</span><span class="ss">:first_name</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"John"</span>
<span class="n">order</span><span class="p">[</span><span class="ss">:billing_address</span><span class="p">][</span><span class="ss">:last_name</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"Smith"</span>
<span class="n">order</span><span class="p">[</span><span class="ss">:billing_address</span><span class="p">][</span><span class="ss">:country_code</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"US"</span>
<span class="n">order</span><span class="p">[</span><span class="ss">:billing_address</span><span class="p">][</span><span class="ss">:address1</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"129 Newbury St"</span>
<span class="n">order</span><span class="p">[</span><span class="ss">:billing_address</span><span class="p">][</span><span class="ss">:address2</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"Swell Rewards"</span>
<span class="n">order</span><span class="p">[</span><span class="ss">:billing_address</span><span class="p">][</span><span class="ss">:city</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"Boston"</span>
<span class="n">order</span><span class="p">[</span><span class="ss">:billing_address</span><span class="p">][</span><span class="ss">:state</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"MA"</span>
<span class="n">order</span><span class="p">[</span><span class="ss">:billing_address</span><span class="p">][</span><span class="ss">:zip</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"02215"</span>
<span class="n">order</span><span class="p">[</span><span class="ss">:billing_address</span><span class="p">][</span><span class="ss">:phone</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"18442924097"</span>

<span class="n">order</span><span class="p">[</span><span class="ss">:shipping_address</span><span class="p">]</span> <span class="o">=</span> <span class="no">Hash</span><span class="p">.</span><span class="nf">new</span>
<span class="n">order</span><span class="p">[</span><span class="ss">:shipping_address</span><span class="p">][</span><span class="ss">:first_name</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"John"</span>
<span class="n">order</span><span class="p">[</span><span class="ss">:shipping_address</span><span class="p">][</span><span class="ss">:last_name</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"Smith"</span>
<span class="n">order</span><span class="p">[</span><span class="ss">:shipping_address</span><span class="p">][</span><span class="ss">:country_code</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"US"</span>
<span class="n">order</span><span class="p">[</span><span class="ss">:shipping_address</span><span class="p">][</span><span class="ss">:address1</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"129 Newbury St"</span>
<span class="n">order</span><span class="p">[</span><span class="ss">:shipping_address</span><span class="p">][</span><span class="ss">:address2</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"Swell Rewards"</span>
<span class="n">order</span><span class="p">[</span><span class="ss">:shipping_address</span><span class="p">][</span><span class="ss">:city</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"Boston"</span>
<span class="n">order</span><span class="p">[</span><span class="ss">:shipping_address</span><span class="p">][</span><span class="ss">:state</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"MA"</span>
<span class="n">order</span><span class="p">[</span><span class="ss">:shipping_address</span><span class="p">][</span><span class="ss">:zip</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"02215"</span>
<span class="n">order</span><span class="p">[</span><span class="ss">:shipping_address</span><span class="p">][</span><span class="ss">:phone</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"18442924097"</span>

<span class="n">item</span> <span class="o">=</span> <span class="no">Hash</span><span class="p">.</span><span class="nf">new</span>
<span class="n">item</span><span class="p">[</span><span class="ss">:id</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"PRO_FHR93H9H912GG"</span>
<span class="n">item</span><span class="p">[</span><span class="ss">:name</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"iPhone 7 128GB"</span>
<span class="n">item</span><span class="p">[</span><span class="ss">:quantity</span><span class="p">]</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">item</span><span class="p">[</span><span class="ss">:price_cents</span><span class="p">]</span> <span class="o">=</span> <span class="mi">74900</span>

<span class="n">order</span><span class="p">[</span><span class="ss">:items</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">item</span><span class="p">]</span>


<span class="c1"># add authentication params (could also use headers)</span>
<span class="n">order</span><span class="p">[</span><span class="ss">:merchant_id</span><span class="p">]</span> <span class="o">=</span> <span class="mi">12345</span>
<span class="n">order</span><span class="p">[</span><span class="ss">:api_key</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"MY_API_KEY"</span>

<span class="n">conn</span> <span class="o">=</span> <span class="no">Faraday</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="ss">:url</span> <span class="o">=&gt;</span> <span class="s2">"https://app.swellrewards.com"</span><span class="p">)</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">conn</span><span class="p">.</span><span class="nf">post</span> <span class="k">do</span> <span class="o">|</span><span class="n">req</span><span class="o">|</span>
  <span class="n">req</span><span class="p">.</span><span class="nf">url</span> <span class="s2">"/api/v2/orders"</span>
  <span class="n">req</span><span class="p">.</span><span class="nf">headers</span><span class="p">[</span><span class="s1">'Content-Type'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'application/json'</span>
  <span class="n">req</span><span class="p">.</span><span class="nf">body</span> <span class="o">=</span> <span class="n">order</span><span class="p">.</span><span class="nf">to_json</span>
<span class="k">end</span>

</code></pre>

<p>This endpoint records an order made by a customer.  It will apply the order to all matching active campaigns and award the necessary points and/or discounts.  </p>

<h4 id="http-request">HTTP Request</h4>

<p><code class="prettyprint">POST https://app.swellrewards.com/api/v2/orders</code></p>

<h4 id="query-parameters">Query Parameters</h4>

<table><thead>
<tr>
<th>Parameters</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>customer_email</td>
<td>string</td>
<td>The email address of the customer who placed the order.</td>
</tr>
<tr>
<td>total_amount_cents</td>
<td>int</td>
<td>The total amount the customer spent in cents.</td>
</tr>
<tr>
<td>currency_code</td>
<td>string</td>
<td>The currency used (e.g. &lsquo;USD&rsquo;).</td>
</tr>
<tr>
<td>order_id</td>
<td>string</td>
<td>An identifier that uniquely identifies this order in your system.</td>
</tr>
<tr>
<td>customer_id</td>
<td>string</td>
<td>An identifier that uniquely identifies the customer who made this order in your system.</td>
</tr>
<tr>
<td>status</td>
<td>string (optional)</td>
<td>The current order status.  Will be used to determine when to apply to campaigns.</td>
</tr>
<tr>
<td>created_at</td>
<td>datetime (optional)</td>
<td>A timestamp describing when this order was made.</td>
</tr>
<tr>
<td>customer_tags</td>
<td>string (optional)</td>
<td>A comma separated list of tags assigned to the customer.</td>
</tr>
<tr>
<td>coupon_code</td>
<td>string (optional)</td>
<td>The coupon code used on this order.</td>
</tr>
<tr>
<td>ip_address</td>
<td>string (optional)</td>
<td>The ip address of the customer when the order was placed.  This is required for tracking referrals.</td>
</tr>
<tr>
<td>user_agent</td>
<td>string (optional)</td>
<td>The browser user agent of the customer when the order was placed.  This is strongly recommended for tracking referrals.</td>
</tr>
<tr>
<td>total_refunded_cents</td>
<td>int (optional)</td>
<td>The total amount refunded in cents.</td>
</tr>
<tr>
<td>shipping_amount_cents</td>
<td>int (optional)</td>
<td>The total amount the customer spent on shipping in cents.</td>
</tr>
<tr>
<td>discount_amount_cents</td>
<td>int (optional)</td>
<td>The total amount the customer saved with discounts in cents.</td>
</tr>
<tr>
<td>tax_amount_cents</td>
<td>int (optional)</td>
<td>The total amount the customer spent on taxes.</td>
</tr>
<tr>
<td>items</td>
<td>array</td>
<td>An array of items purchased.  Please see below for the required structure for each item.</td>
</tr>
<tr>
<td>billing_address</td>
<td>object (optional)</td>
<td>An address object representing the billing address used for the order.</td>
</tr>
<tr>
<td>shipping_address</td>
<td>object (optional)</td>
<td>An address object representing the shipping address used for the order.</td>
</tr>
</tbody></table>

<h4 id="item-parameters">Item Parameters</h4>

<table><thead>
<tr>
<th>Parameters</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>string</td>
<td>An identifier that uniquely identifies this product in your system.</td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td>A customer facing name for the product.</td>
</tr>
<tr>
<td>quantity</td>
<td>int</td>
<td>The quantity of this product purchased by the customer in this order.</td>
</tr>
<tr>
<td>price_cents</td>
<td>int</td>
<td>The total price of this item (per quantity) in cents.</td>
</tr>
<tr>
<td>collections</td>
<td>string (optional)</td>
<td>An comma separated list of all the collections (or tags) that this product belongs to.</td>
</tr>
<tr>
<td>type</td>
<td>string (optional)</td>
<td>A category or product type, used in filtering eligibility.</td>
</tr>
<tr>
<td>vendor</td>
<td>string (optional)</td>
<td>The vendor of the product.</td>
</tr>
</tbody></table>

<h4 id="address-parameters">Address Parameters</h4>

<table><thead>
<tr>
<th>Parameters</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>country_code</td>
<td>string</td>
<td>The two character country code (e.g. &ldquo;US&rdquo;).</td>
</tr>
<tr>
<td>first_name</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>last_name</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>address1</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>address2</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>city</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>state</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>zip</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>phone</td>
<td>string</td>
<td></td>
</tr>
</tbody></table>

<h2 id="refunds">Refunds</h2>

<h3 id="create-a-refund">Create a refund</h3>
<pre class="highlight ruby"><code><span class="nb">require</span> <span class="s1">'faraday'</span>

<span class="n">refund</span> <span class="o">=</span> <span class="no">Hash</span><span class="p">.</span><span class="nf">new</span>
<span class="n">refund</span><span class="p">[</span><span class="ss">:order_id</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"ORD_43H9ADHW1308123"</span>
<span class="n">refund</span><span class="p">[</span><span class="ss">:total_amount_cents</span><span class="p">]</span> <span class="o">=</span> <span class="mi">250</span>

<span class="c1"># add authentication params (could also use headers)</span>
<span class="n">refund</span><span class="p">[</span><span class="ss">:merchant_id</span><span class="p">]</span> <span class="o">=</span> <span class="mi">12345</span>
<span class="n">refund</span><span class="p">[</span><span class="ss">:api_key</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"MY_API_KEY"</span>

<span class="n">conn</span> <span class="o">=</span> <span class="no">Faraday</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="ss">:url</span> <span class="o">=&gt;</span> <span class="s2">"https://app.swellrewards.com"</span><span class="p">)</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">conn</span><span class="p">.</span><span class="nf">post</span> <span class="k">do</span> <span class="o">|</span><span class="n">req</span><span class="o">|</span>
  <span class="n">req</span><span class="p">.</span><span class="nf">url</span> <span class="s2">"/api/v2/refunds"</span>
  <span class="n">req</span><span class="p">.</span><span class="nf">headers</span><span class="p">[</span><span class="s1">'Content-Type'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'application/json'</span>
  <span class="n">req</span><span class="p">.</span><span class="nf">body</span> <span class="o">=</span> <span class="n">refund</span><span class="p">.</span><span class="nf">to_json</span>
<span class="k">end</span>

</code></pre>

<p>This endpoint records an refund made by you for an existing order.  It will apply the refund to order and then adjust any reward given by the original order.</p>

<h4 id="http-request">HTTP Request</h4>

<p><code class="prettyprint">POST https://app.swellrewards.com/api/v2/refunds</code></p>

<h4 id="query-parameters">Query Parameters</h4>

<table><thead>
<tr>
<th>Parameters</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>order_id</td>
<td>string</td>
<td>The identifier used to uniquely identify the order in your system.  It must match the order_id used when the order was created with the /orders endpoint.</td>
</tr>
<tr>
<td>total_amount_cents</td>
<td>int</td>
<td>The total amount the customer was refunded in cents.</td>
</tr>
</tbody></table>

<h2 id="events">Events</h2>

<h3 id="introduction">Introduction</h3>

<p>Swell can publish events to a webhook url or directly to one of our partner integrations.  These events can be used to trigger transactional emails, supplement customer data in your crm, or pretty much anything else you could imagine.</p>

<h3 id="points-earned">Points Earned</h3>
<pre class="highlight ruby"><code>
<span class="no">Example</span> <span class="no">Event</span> <span class="no">JSON</span> <span class="no">Structure</span><span class="p">:</span>

<span class="p">{{</span>
    <span class="s2">"topic"</span><span class="p">:</span> <span class="s2">"swell/points/earned"</span><span class="p">,</span>
    <span class="s2">"name"</span><span class="p">:</span> <span class="s2">"Swell Points Earned"</span><span class="p">,</span>
    <span class="s2">"email"</span><span class="p">:</span> <span class="s2">"john.smith@gmail.com"</span><span class="p">,</span>
    <span class="s2">"customer"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">"total_spend_cents"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="s2">"total_purchases"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="s2">"perks_redeemed"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="s2">"last_purchase_at"</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
        <span class="s2">"email"</span><span class="p">:</span> <span class="s2">"john.smith@gmail.com"</span><span class="p">,</span>
        <span class="s2">"points_earned"</span><span class="p">:</span> <span class="mi">200</span><span class="p">,</span>
        <span class="s2">"points_balance"</span><span class="p">:</span> <span class="mi">200</span><span class="p">,</span>
        <span class="s2">"points_expire_at"</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
        <span class="s2">"first_name"</span><span class="p">:</span> <span class="s2">"John"</span><span class="p">,</span>
        <span class="s2">"last_name"</span><span class="p">:</span> <span class="s2">"Smith"</span><span class="p">,</span>
        <span class="s2">"last_seen_at"</span><span class="p">:</span> <span class="s2">"2016-10-15T15:29:27.000Z"</span><span class="p">,</span>
        <span class="s2">"thirty_party_id"</span><span class="p">:</span> <span class="s2">"4302977345"</span><span class="p">,</span>
        <span class="s2">"referral_code"</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">"code"</span><span class="p">:</span> <span class="s2">"117yu4g"</span><span class="p">,</span>
            <span class="s2">"shares"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">"facebook_shares"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">"twitter_shares"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">"email_shares"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">"emails_sent"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">"emails_viewed"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">"links_clicked_from_email"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">"links_clicked_from_twitter"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">"links_clicked_from_facebook"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">"orders"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">"amount_cents"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">"average_amount_cents"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">"expires_at"</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
            <span class="s2">"expired"</span><span class="p">:</span> <span class="kp">false</span><span class="p">,</span>
            <span class="s2">"completed_referral_customers"</span><span class="p">:</span> <span class="p">[],</span>
            <span class="s2">"email"</span><span class="p">:</span> <span class="s2">"john.smith@gmail.com"</span><span class="p">,</span>
            <span class="s2">"unique_clicks"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">"total_clicks"</span><span class="p">:</span> <span class="mi">0</span>
        <span class="p">}</span>
    <span class="p">},</span>
    <span class="s2">"perk"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">"id"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="s2">"campaign_id"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="s2">"merchant_id"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="s2">"customer_id"</span><span class="p">:</span> <span class="mi">139</span><span class="p">,</span>
        <span class="s2">"reward_points"</span><span class="p">:</span> <span class="mi">200</span><span class="p">,</span>
        <span class="s2">"completed"</span><span class="p">:</span> <span class="kp">true</span><span class="p">,</span>
        <span class="s2">"completed_at"</span><span class="p">:</span> <span class="s2">"2016-10-15T15:29:27.911Z"</span><span class="p">,</span>
        <span class="s2">"awarded"</span><span class="p">:</span> <span class="kp">true</span><span class="p">,</span>
        <span class="s2">"awarded_at"</span><span class="p">:</span> <span class="s2">"2016-10-15T15:29:27.911Z"</span><span class="p">,</span>
        <span class="s2">"pending"</span><span class="p">:</span> <span class="kp">false</span><span class="p">,</span>
        <span class="s2">"reversed"</span><span class="p">:</span> <span class="kp">false</span><span class="p">,</span>
        <span class="s2">"reversed_at"</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
        <span class="s2">"expired"</span><span class="p">:</span> <span class="kp">false</span><span class="p">,</span>
        <span class="s2">"expired_at"</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
        <span class="s2">"expires_at"</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
        <span class="s2">"redemption_option_id"</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
        <span class="s2">"history_title"</span><span class="p">:</span> <span class="s2">"Create an account"</span><span class="p">,</span>
        <span class="s2">"created_at"</span><span class="p">:</span> <span class="s2">"2016-10-15T15:29:27.828Z"</span>
    <span class="p">}</span>
<span class="p">}</span>

</code></pre>

<p>This event is triggered any time a customer earns points.  This event is useful for keeping a customers point balance up to date in your CRM or email marketing platform.  </p>

<table><thead>
<tr>
<th>Important Attributes</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>email</td>
<td>The email address of the customer who earned points.</td>
</tr>
<tr>
<td>customer.points_balance</td>
<td>The customers updated point balance.</td>
</tr>
<tr>
<td>perk.reward_points</td>
<td>The amount of points they just earned.</td>
</tr>
<tr>
<td>perk.history_title</td>
<td>A short description of the action that lead them to earn these points.</td>
</tr>
</tbody></table>

<h3 id="coupon-earned-redeemed">Coupon Earned (Redeemed)</h3>
<pre class="highlight ruby"><code>
<span class="no">Example</span> <span class="no">Event</span> <span class="no">JSON</span> <span class="no">Structure</span><span class="p">:</span>

<span class="p">{</span>
    <span class="s2">"topic"</span><span class="p">:</span> <span class="s2">"swell/redemption/created"</span><span class="p">,</span>
    <span class="s2">"name"</span><span class="p">:</span> <span class="s2">"Swell Redemption Created"</span><span class="p">,</span>
    <span class="s2">"redemption"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">"id"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="s2">"created_at"</span><span class="p">:</span> <span class="s2">"2016-10-15T15:56:01.692Z"</span><span class="p">,</span>
        <span class="s2">"updated_at"</span><span class="p">:</span> <span class="s2">"2016-10-15T15:56:01.692Z"</span><span class="p">,</span>
        <span class="s2">"reward_text"</span><span class="p">:</span> <span class="s2">"FIVEOFF"</span><span class="p">,</span>
        <span class="s2">"approved"</span><span class="p">:</span> <span class="kp">true</span><span class="p">,</span>
        <span class="s2">"approved_at"</span><span class="p">:</span> <span class="s2">"2016-10-15T15:56:01.734Z"</span><span class="p">,</span>
        <span class="s2">"is_admin"</span><span class="p">:</span> <span class="kp">false</span><span class="p">,</span>
        <span class="s2">"is_pos"</span><span class="p">:</span> <span class="kp">false</span><span class="p">,</span>
        <span class="s2">"at_checkout"</span><span class="p">:</span> <span class="kp">false</span>
    <span class="p">},</span>
    <span class="s2">"redemption_option"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">"id"</span><span class="p">:</span> <span class="mi">149</span><span class="p">,</span>
        <span class="s2">"name"</span><span class="p">:</span> <span class="s2">"$5.00 Off"</span><span class="p">,</span>
        <span class="s2">"description"</span><span class="p">:</span> <span class="s2">"Get $5.00 off your next purchase for 500 points"</span><span class="p">,</span>
        <span class="s2">"icon"</span><span class="p">:</span> <span class="s2">"fa-dollar"</span><span class="p">,</span>
        <span class="s2">"cost_text"</span><span class="p">:</span> <span class="s2">"500 Points"</span><span class="p">,</span>
        <span class="s2">"amount"</span><span class="p">:</span> <span class="mi">500</span>
    <span class="p">},</span>
    <span class="s2">"email"</span><span class="p">:</span> <span class="s2">"john.smith@gmail.com"</span><span class="p">,</span>
    <span class="s2">"customer"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">"total_spend_cents"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="s2">"total_purchases"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="s2">"perks_redeemed"</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
        <span class="s2">"last_purchase_at"</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
        <span class="s2">"email"</span><span class="p">:</span> <span class="s2">"john.smith@gmail.com"</span><span class="p">,</span>
        <span class="s2">"points_earned"</span><span class="p">:</span> <span class="mi">5200</span><span class="p">,</span>
        <span class="s2">"points_balance"</span><span class="p">:</span> <span class="mi">4700</span><span class="p">,</span>
        <span class="s2">"points_expire_at"</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
        <span class="s2">"first_name"</span><span class="p">:</span> <span class="s2">"John"</span><span class="p">,</span>
        <span class="s2">"last_name"</span><span class="p">:</span> <span class="s2">"Smith"</span><span class="p">,</span>
        <span class="s2">"last_seen_at"</span><span class="p">:</span> <span class="s2">"2016-10-15T15:54:43.000Z"</span><span class="p">,</span>
        <span class="s2">"thirty_party_id"</span><span class="p">:</span> <span class="s2">"4302977345"</span><span class="p">,</span>
        <span class="s2">"referral_code"</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">"code"</span><span class="p">:</span> <span class="s2">"117yu4g"</span><span class="p">,</span>
            <span class="s2">"shares"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">"facebook_shares"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">"twitter_shares"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">"email_shares"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">"emails_sent"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">"emails_viewed"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">"links_clicked_from_email"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">"links_clicked_from_twitter"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">"links_clicked_from_facebook"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">"orders"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">"amount_cents"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">"average_amount_cents"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">"expires_at"</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
            <span class="s2">"expired"</span><span class="p">:</span> <span class="kp">false</span><span class="p">,</span>
            <span class="s2">"completed_referral_customers"</span><span class="p">:</span> <span class="p">[],</span>
            <span class="s2">"email"</span><span class="p">:</span> <span class="s2">"john.smith@gmail.com"</span><span class="p">,</span>
            <span class="s2">"unique_clicks"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">"total_clicks"</span><span class="p">:</span> <span class="mi">0</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>

</code></pre>

<p>This event is triggered any time a customer redeems points for a discount.  This event is useful for sending an email with the coupon code to the customer.</p>

<table><thead>
<tr>
<th>Important Attributes</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>email</td>
<td>The email address of the customer who earned points.</td>
</tr>
<tr>
<td>redemption.reward_text</td>
<td>The coupon code earned or redeemed.</td>
</tr>
<tr>
<td>redemption_option.amount</td>
<td>The amount of points redeemed.</td>
</tr>
<tr>
<td>redemption_option.name</td>
<td>Short description of what the coupon is for.</td>
</tr>
</tbody></table>

<h3 id="coupon-earned-awarded">Coupon Earned (Awarded)</h3>
<pre class="highlight ruby"><code>
<span class="no">Example</span> <span class="no">Event</span> <span class="no">JSON</span> <span class="no">Structure</span><span class="p">:</span>

<span class="p">{</span>
    <span class="s2">"topic"</span><span class="p">:</span> <span class="s2">"swell/redemption/created"</span><span class="p">,</span>
    <span class="s2">"name"</span><span class="p">:</span> <span class="s2">"Swell Redemption Created"</span><span class="p">,</span>
    <span class="s2">"redemption"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">"id"</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
        <span class="s2">"created_at"</span><span class="p">:</span> <span class="s2">"2016-10-15T16:00:17.786Z"</span><span class="p">,</span>
        <span class="s2">"updated_at"</span><span class="p">:</span> <span class="s2">"2016-10-15T16:00:17.786Z"</span><span class="p">,</span>
        <span class="s2">"reward_text"</span><span class="p">:</span> <span class="s2">"TENPERCENT"</span><span class="p">,</span>
        <span class="s2">"approved"</span><span class="p">:</span> <span class="kp">true</span><span class="p">,</span>
        <span class="s2">"approved_at"</span><span class="p">:</span> <span class="s2">"2016-10-15T16:00:17.915Z"</span><span class="p">,</span>
        <span class="s2">"is_admin"</span><span class="p">:</span> <span class="kp">false</span><span class="p">,</span>
        <span class="s2">"is_pos"</span><span class="p">:</span> <span class="kp">false</span><span class="p">,</span>
        <span class="s2">"at_checkout"</span><span class="p">:</span> <span class="kp">false</span>
    <span class="p">},</span>
    <span class="s2">"redemption_option"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">"id"</span><span class="p">:</span> <span class="mi">152</span><span class="p">,</span>
        <span class="s2">"name"</span><span class="p">:</span> <span class="s2">"10% Off"</span><span class="p">,</span>
        <span class="s2">"description"</span><span class="p">:</span> <span class="s2">"Get 10% off your next purchase for 0 points"</span><span class="p">,</span>
        <span class="s2">"icon"</span><span class="p">:</span> <span class="s2">"fa-percent"</span><span class="p">,</span>
        <span class="s2">"cost_text"</span><span class="p">:</span> <span class="s2">"0 Points"</span><span class="p">,</span>
        <span class="s2">"amount"</span><span class="p">:</span> <span class="mi">0</span>
    <span class="p">},</span>
    <span class="s2">"email"</span><span class="p">:</span> <span class="s2">"john.smith@gmail.com"</span><span class="p">,</span>
    <span class="s2">"customer"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">"total_spend_cents"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="s2">"total_purchases"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="s2">"perks_redeemed"</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
        <span class="s2">"last_purchase_at"</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
        <span class="s2">"email"</span><span class="p">:</span> <span class="s2">"john.smith@gmail.com"</span><span class="p">,</span>
        <span class="s2">"points_earned"</span><span class="p">:</span> <span class="mi">5200</span><span class="p">,</span>
        <span class="s2">"points_balance"</span><span class="p">:</span> <span class="mi">4700</span><span class="p">,</span>
        <span class="s2">"points_expire_at"</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
        <span class="s2">"first_name"</span><span class="p">:</span> <span class="s2">"John"</span><span class="p">,</span>
        <span class="s2">"last_name"</span><span class="p">:</span> <span class="s2">"Smith"</span><span class="p">,</span>
        <span class="s2">"last_seen_at"</span><span class="p">:</span> <span class="s2">"2016-10-15T16:00:17.000Z"</span><span class="p">,</span>
        <span class="s2">"thirty_party_id"</span><span class="p">:</span> <span class="s2">"4302977345"</span><span class="p">,</span>
        <span class="s2">"referral_code"</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">"code"</span><span class="p">:</span> <span class="s2">"117yu4g"</span><span class="p">,</span>
            <span class="s2">"shares"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">"facebook_shares"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">"twitter_shares"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">"email_shares"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">"emails_sent"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">"emails_viewed"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">"links_clicked_from_email"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">"links_clicked_from_twitter"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">"links_clicked_from_facebook"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">"orders"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">"amount_cents"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">"average_amount_cents"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">"expires_at"</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
            <span class="s2">"expired"</span><span class="p">:</span> <span class="kp">false</span><span class="p">,</span>
            <span class="s2">"completed_referral_customers"</span><span class="p">:</span> <span class="p">[],</span>
            <span class="s2">"email"</span><span class="p">:</span> <span class="s2">"john.smith@gmail.com"</span><span class="p">,</span>
            <span class="s2">"unique_clicks"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">"total_clicks"</span><span class="p">:</span> <span class="mi">0</span>
        <span class="p">}</span>
    <span class="p">},</span>
    <span class="s2">"perk"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">"id"</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
        <span class="s2">"campaign_id"</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
        <span class="s2">"merchant_id"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="s2">"customer_id"</span><span class="p">:</span> <span class="mi">139</span><span class="p">,</span>
        <span class="s2">"reward_points"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="s2">"completed"</span><span class="p">:</span> <span class="kp">false</span><span class="p">,</span>
        <span class="s2">"completed_at"</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
        <span class="s2">"awarded"</span><span class="p">:</span> <span class="kp">false</span><span class="p">,</span>
        <span class="s2">"awarded_at"</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
        <span class="s2">"pending"</span><span class="p">:</span> <span class="kp">false</span><span class="p">,</span>
        <span class="s2">"reversed"</span><span class="p">:</span> <span class="kp">false</span><span class="p">,</span>
        <span class="s2">"reversed_at"</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
        <span class="s2">"expired"</span><span class="p">:</span> <span class="kp">false</span><span class="p">,</span>
        <span class="s2">"expired_at"</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
        <span class="s2">"expires_at"</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
        <span class="s2">"redemption_option_id"</span><span class="p">:</span> <span class="mi">152</span><span class="p">,</span>
        <span class="s2">"history_title"</span><span class="p">:</span> <span class="s2">"Join our newsletter"</span><span class="p">,</span>
        <span class="s2">"created_at"</span><span class="p">:</span> <span class="s2">"2016-10-15T16:00:17.000Z"</span><span class="p">,</span>
        <span class="s2">"redemption_option"</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">"id"</span><span class="p">:</span> <span class="mi">152</span><span class="p">,</span>
            <span class="s2">"name"</span><span class="p">:</span> <span class="s2">"10% Off"</span><span class="p">,</span>
            <span class="s2">"description"</span><span class="p">:</span> <span class="s2">"Get 10% off your next purchase for 0 points"</span><span class="p">,</span>
            <span class="s2">"icon"</span><span class="p">:</span> <span class="s2">"fa-percent"</span><span class="p">,</span>
            <span class="s2">"cost_text"</span><span class="p">:</span> <span class="s2">"0 Points"</span><span class="p">,</span>
            <span class="s2">"amount"</span><span class="p">:</span> <span class="mi">0</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>

</code></pre>

<p>This event is triggered any time a customer earns a discount from completing a campaign (e.g. Newsletter Signup).  This event is useful for sending an email with the coupon code to the customer.</p>

<table><thead>
<tr>
<th>Important Attributes</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>email</td>
<td>The email address of the customer who earned points.</td>
</tr>
<tr>
<td>redemption.reward_text</td>
<td>The coupon code earned or redeemed.</td>
</tr>
<tr>
<td>redemption_option.name</td>
<td>Short description of what the coupon is for.</td>
</tr>
<tr>
<td>perk.history_title</td>
<td>A short description of the action that lead them to earn this discount.</td>
</tr>
</tbody></table>

<h3 id="referral-completed">Referral Completed</h3>
<pre class="highlight ruby"><code>
<span class="no">Example</span> <span class="no">Event</span> <span class="no">JSON</span> <span class="no">Structure</span><span class="p">:</span>

<span class="p">{</span>
    <span class="s2">"topic"</span><span class="p">:</span> <span class="s2">"swell/referral/completed"</span><span class="p">,</span>
    <span class="s2">"name"</span><span class="p">:</span> <span class="s2">"Swell Referral Completed"</span><span class="p">,</span>
    <span class="s2">"perk"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">"id"</span><span class="p">:</span> <span class="mi">9</span><span class="p">,</span>
        <span class="s2">"campaign_id"</span><span class="p">:</span> <span class="mi">7</span><span class="p">,</span>
        <span class="s2">"merchant_id"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="s2">"customer_id"</span><span class="p">:</span> <span class="mi">139</span><span class="p">,</span>
        <span class="s2">"reward_points"</span><span class="p">:</span> <span class="mi">500</span><span class="p">,</span>
        <span class="s2">"completed"</span><span class="p">:</span> <span class="kp">true</span><span class="p">,</span>
        <span class="s2">"completed_at"</span><span class="p">:</span> <span class="s2">"2016-10-15T16:02:56.142Z"</span><span class="p">,</span>
        <span class="s2">"awarded"</span><span class="p">:</span> <span class="kp">true</span><span class="p">,</span>
        <span class="s2">"awarded_at"</span><span class="p">:</span> <span class="s2">"2016-10-15T16:02:56.142Z"</span><span class="p">,</span>
        <span class="s2">"pending"</span><span class="p">:</span> <span class="kp">false</span><span class="p">,</span>
        <span class="s2">"reversed"</span><span class="p">:</span> <span class="kp">false</span><span class="p">,</span>
        <span class="s2">"reversed_at"</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
        <span class="s2">"expired"</span><span class="p">:</span> <span class="kp">false</span><span class="p">,</span>
        <span class="s2">"expired_at"</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
        <span class="s2">"expires_at"</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
        <span class="s2">"redemption_option_id"</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
        <span class="s2">"history_title"</span><span class="p">:</span> <span class="s2">"Refer a friend"</span><span class="p">,</span>
        <span class="s2">"created_at"</span><span class="p">:</span> <span class="s2">"2016-10-15T16:02:56.125Z"</span>
    <span class="p">},</span>
    <span class="s2">"email"</span><span class="p">:</span> <span class="s2">"john.smith@gmail.com"</span><span class="p">,</span>
    <span class="s2">"referrer"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">"total_spend_cents"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="s2">"total_purchases"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="s2">"perks_redeemed"</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
        <span class="s2">"last_purchase_at"</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
        <span class="s2">"email"</span><span class="p">:</span> <span class="s2">"john.smith@gmail.com"</span><span class="p">,</span>
        <span class="s2">"points_earned"</span><span class="p">:</span> <span class="mi">5700</span><span class="p">,</span>
        <span class="s2">"points_balance"</span><span class="p">:</span> <span class="mi">5200</span><span class="p">,</span>
        <span class="s2">"points_expire_at"</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
        <span class="s2">"first_name"</span><span class="p">:</span> <span class="s2">"John"</span><span class="p">,</span>
        <span class="s2">"last_name"</span><span class="p">:</span> <span class="s2">"Smith"</span><span class="p">,</span>
        <span class="s2">"last_seen_at"</span><span class="p">:</span> <span class="s2">"2016-10-15T16:01:40.000Z"</span><span class="p">,</span>
        <span class="s2">"thirty_party_id"</span><span class="p">:</span> <span class="s2">"4302977345"</span><span class="p">,</span>
        <span class="s2">"referral_code"</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">"code"</span><span class="p">:</span> <span class="s2">"117yu4g"</span><span class="p">,</span>
            <span class="s2">"shares"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">"facebook_shares"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">"twitter_shares"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">"email_shares"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">"emails_sent"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">"emails_viewed"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">"links_clicked_from_email"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">"links_clicked_from_twitter"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">"links_clicked_from_facebook"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">"orders"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">"amount_cents"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">"average_amount_cents"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">"expires_at"</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
            <span class="s2">"expired"</span><span class="p">:</span> <span class="kp">false</span><span class="p">,</span>
            <span class="s2">"completed_referral_customers"</span><span class="p">:</span> <span class="p">[{</span>
                <span class="s2">"email"</span><span class="p">:</span> <span class="s2">"sally.jane@gmail.com"</span><span class="p">,</span>
                <span class="s2">"first_name"</span><span class="p">:</span> <span class="s2">"Sally"</span><span class="p">,</span>
                <span class="s2">"last_name"</span><span class="p">:</span> <span class="s2">"Jane"</span><span class="p">,</span>
                <span class="s2">"referral_points_contributed"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                <span class="s2">"last_seen_at"</span><span class="p">:</span> <span class="s2">"2016-10-15T16:02:51.000Z"</span>
            <span class="p">}],</span>
            <span class="s2">"email"</span><span class="p">:</span> <span class="s2">"john.smith@gmail.com"</span><span class="p">,</span>
            <span class="s2">"unique_clicks"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="s2">"total_clicks"</span><span class="p">:</span> <span class="mi">1</span>
        <span class="p">}</span>
    <span class="p">},</span>
    <span class="s2">"referral_code"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">"id"</span><span class="p">:</span> <span class="mi">139</span><span class="p">,</span>
        <span class="s2">"code"</span><span class="p">:</span> <span class="s2">"117yu4g"</span><span class="p">,</span>
        <span class="s2">"campaign_id"</span><span class="p">:</span> <span class="mi">7</span><span class="p">,</span>
        <span class="s2">"clicks"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="s2">"invalid_clicks"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="s2">"customer_id"</span><span class="p">:</span> <span class="mi">139</span><span class="p">,</span>
        <span class="s2">"shares"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="s2">"facebook_shares"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="s2">"twitter_shares"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="s2">"email_shares"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="s2">"emails_sent"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="s2">"emails_viewed"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="s2">"links_clicked"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="s2">"links_clicked_from_email"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="s2">"links_clicked_from_twitter"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="s2">"links_clicked_from_facebook"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="s2">"orders"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="s2">"amount_cents"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="s2">"average_amount_cents"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="s2">"expires_at"</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
        <span class="s2">"expired"</span><span class="p">:</span> <span class="kp">false</span><span class="p">,</span>
        <span class="s2">"target_referrals"</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
        <span class="s2">"customer"</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">"id"</span><span class="p">:</span> <span class="mi">139</span><span class="p">,</span>
            <span class="s2">"user_id"</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
            <span class="s2">"merchant_id"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="s2">"total_purchases"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">"perks_redeemed"</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
            <span class="s2">"last_purchase_at"</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
            <span class="s2">"is_member"</span><span class="p">:</span> <span class="kp">false</span><span class="p">,</span>
            <span class="s2">"email"</span><span class="p">:</span> <span class="s2">"john.smith@gmail.com"</span><span class="p">,</span>
            <span class="s2">"name"</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
            <span class="s2">"total_spend_cents"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">"subscribed"</span><span class="p">:</span> <span class="kp">true</span><span class="p">,</span>
            <span class="s2">"email_sent_count"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">"email_opened_count"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">"email_clicked_count"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">"email_bounced_count"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">"email_soft_bounced_count"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">"email_rejected_count"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">"email_unsubscribed_count"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">"email_marked_as_spam_count"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">"email_delayed_count"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">"points_earned"</span><span class="p">:</span> <span class="mi">5700</span><span class="p">,</span>
            <span class="s2">"points_balance"</span><span class="p">:</span> <span class="mi">5200</span><span class="p">,</span>
            <span class="s2">"source"</span><span class="p">:</span> <span class="s2">"store_account"</span><span class="p">,</span>
            <span class="s2">"points_expiration_job_id"</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
            <span class="s2">"points_expire_at"</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
            <span class="s2">"first_name"</span><span class="p">:</span> <span class="s2">"John"</span><span class="p">,</span>
            <span class="s2">"last_name"</span><span class="p">:</span> <span class="s2">"Smith"</span><span class="p">,</span>
            <span class="s2">"prettyTotalSpend"</span><span class="p">:</span> <span class="s2">"$0"</span><span class="p">,</span>
            <span class="s2">"last_seen_at"</span><span class="p">:</span> <span class="s2">"2016-10-15T16:01:40.000Z"</span>
        <span class="p">},</span>
        <span class="s2">"completed_referral_customers"</span><span class="p">:</span> <span class="p">[{</span>
            <span class="s2">"email"</span><span class="p">:</span> <span class="s2">"sally.jane@gmail.com"</span><span class="p">,</span>
            <span class="s2">"first_name"</span><span class="p">:</span> <span class="s2">"Sally"</span><span class="p">,</span>
            <span class="s2">"last_name"</span><span class="p">:</span> <span class="s2">"Jane"</span><span class="p">,</span>
            <span class="s2">"referral_points_contributed"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">"last_seen_at"</span><span class="p">:</span> <span class="s2">"2016-10-15T16:02:51.000Z"</span>
        <span class="p">}],</span>
        <span class="s2">"email"</span><span class="p">:</span> <span class="s2">"john.smith@gmail.com"</span>
    <span class="p">},</span>
    <span class="s2">"referred_customer"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">"total_spend_cents"</span><span class="p">:</span> <span class="mi">2500</span><span class="p">,</span>
        <span class="s2">"total_purchases"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="s2">"perks_redeemed"</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
        <span class="s2">"last_purchase_at"</span><span class="p">:</span> <span class="s2">"2016-10-15T16:02:51.000Z"</span><span class="p">,</span>
        <span class="s2">"email"</span><span class="p">:</span> <span class="s2">"sally.jane@gmail.com"</span><span class="p">,</span>
        <span class="s2">"points_earned"</span><span class="p">:</span> <span class="mi">450</span><span class="p">,</span>
        <span class="s2">"points_balance"</span><span class="p">:</span> <span class="mi">450</span><span class="p">,</span>
        <span class="s2">"points_expire_at"</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
        <span class="s2">"first_name"</span><span class="p">:</span> <span class="s2">"Sally"</span><span class="p">,</span>
        <span class="s2">"last_name"</span><span class="p">:</span> <span class="s2">"Jane"</span><span class="p">,</span>
        <span class="s2">"last_seen_at"</span><span class="p">:</span> <span class="s2">"2016-10-15T16:02:51.000Z"</span><span class="p">,</span>
        <span class="s2">"thirty_party_id"</span><span class="p">:</span> <span class="s2">"4303221377"</span><span class="p">,</span>
        <span class="s2">"referral_code"</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">"code"</span><span class="p">:</span> <span class="s2">"77jspfy"</span><span class="p">,</span>
            <span class="s2">"shares"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">"facebook_shares"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">"twitter_shares"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">"email_shares"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">"emails_sent"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">"emails_viewed"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">"links_clicked_from_email"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">"links_clicked_from_twitter"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">"links_clicked_from_facebook"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">"orders"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">"amount_cents"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">"average_amount_cents"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">"expires_at"</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
            <span class="s2">"expired"</span><span class="p">:</span> <span class="kp">false</span><span class="p">,</span>
            <span class="s2">"completed_referral_customers"</span><span class="p">:</span> <span class="p">[],</span>
            <span class="s2">"email"</span><span class="p">:</span> <span class="s2">"sally.jane@gmail.com"</span><span class="p">,</span>
            <span class="s2">"unique_clicks"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">"total_clicks"</span><span class="p">:</span> <span class="mi">0</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>

</code></pre>

<p>This event is triggered any time a customer refers a friend that satisfies the referral program requirements.  This event is useful for sending an email thanking the customer for the referral.</p>

<table><thead>
<tr>
<th>Important Attributes</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>email</td>
<td>The email address of the customer who made the referral.</td>
</tr>
<tr>
<td>referral_code</td>
<td>Object has information about their overall referral stats.  Useful for including an overview in an email.</td>
</tr>
<tr>
<td>referral_code.completed_referral_customers</td>
<td>An array of customers they have referred so far.</td>
</tr>
<tr>
<td>referred_customer.email</td>
<td>The email address of the customer they referred.</td>
</tr>
<tr>
<td>referred_customer.first_name</td>
<td>The first name of the customer they referred.</td>
</tr>
<tr>
<td>perk.reward_points</td>
<td>If referrer earned points, this is how many.</td>
</tr>
<tr>
<td>redemption.reward_text</td>
<td>If referrer earned a coupon, this is the coupon code.</td>
</tr>
<tr>
<td>redemption_option.name</td>
<td>If referrer earned a coupon, this is the discount name.</td>
</tr>
</tbody></table>

<h3 id="points-reminder">Points Reminder</h3>
<pre class="highlight ruby"><code>
<span class="no">Example</span> <span class="no">Event</span> <span class="no">JSON</span> <span class="no">Structure</span><span class="p">:</span>
<span class="p">{</span>
    <span class="s2">"topic"</span><span class="p">:</span> <span class="s2">"swell/points/reminder"</span><span class="p">,</span>
    <span class="s2">"name"</span><span class="p">:</span> <span class="s2">"Swell Points Reminder"</span><span class="p">,</span>
    <span class="s2">"email"</span><span class="p">:</span> <span class="s2">"john.smith@gmail.com"</span><span class="p">,</span>
    <span class="s2">"customer"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">"total_spend_cents"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="s2">"total_purchases"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="s2">"perks_redeemed"</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
        <span class="s2">"last_purchase_at"</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
        <span class="s2">"email"</span><span class="p">:</span> <span class="s2">"john.smith@gmail.com"</span><span class="p">,</span>
        <span class="s2">"points_earned"</span><span class="p">:</span> <span class="mi">375</span><span class="p">,</span>
        <span class="s2">"points_balance"</span><span class="p">:</span> <span class="mi">375</span><span class="p">,</span>
        <span class="s2">"points_expire_at"</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
        <span class="s2">"first_name"</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
        <span class="s2">"last_name"</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
        <span class="s2">"last_seen_at"</span><span class="p">:</span> <span class="s2">"2016-10-15T18:14:56.000Z"</span><span class="p">,</span>
        <span class="s2">"thirty_party_id"</span><span class="p">:</span> <span class="s2">"4302977345"</span><span class="p">,</span>
        <span class="s2">"referral_code"</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">"code"</span><span class="p">:</span> <span class="s2">"x09u052"</span><span class="p">,</span>
            <span class="s2">"shares"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">"facebook_shares"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">"twitter_shares"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">"email_shares"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">"emails_sent"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">"emails_viewed"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">"links_clicked_from_email"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">"links_clicked_from_twitter"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">"links_clicked_from_facebook"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">"orders"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="s2">"amount_cents"</span><span class="p">:</span> <span class="mi">3000</span><span class="p">,</span>
            <span class="s2">"average_amount_cents"</span><span class="p">:</span> <span class="mi">3000</span><span class="p">,</span>
            <span class="s2">"expires_at"</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
            <span class="s2">"expired"</span><span class="p">:</span> <span class="kp">false</span><span class="p">,</span>
            <span class="s2">"completed_referral_customers"</span><span class="p">:</span> <span class="p">[{</span>
                <span class="s2">"email"</span><span class="p">:</span> <span class="s2">"hillary.clinton@gmail.com"</span><span class="p">,</span>
                <span class="s2">"first_name"</span><span class="p">:</span> <span class="s2">"Hillary"</span><span class="p">,</span>
                <span class="s2">"last_name"</span><span class="p">:</span> <span class="s2">"Clinton"</span><span class="p">,</span>
                <span class="s2">"referral_points_contributed"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                <span class="s2">"last_seen_at"</span><span class="p">:</span> <span class="s2">"2016-10-15T16:38:20.000Z"</span>
            <span class="p">}],</span>
            <span class="s2">"email"</span><span class="p">:</span> <span class="s2">"john.smith@gmail.com"</span><span class="p">,</span>
            <span class="s2">"unique_clicks"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="s2">"total_clicks"</span><span class="p">:</span> <span class="mi">1</span>
        <span class="p">}</span>
    <span class="p">},</span>
    <span class="s2">"points_needed"</span><span class="p">:</span> <span class="mi">125</span><span class="p">,</span>
    <span class="s2">"redemption_option"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">"id"</span><span class="p">:</span> <span class="mi">149</span><span class="p">,</span>
        <span class="s2">"name"</span><span class="p">:</span> <span class="s2">"$5.00 Off"</span><span class="p">,</span>
        <span class="s2">"description"</span><span class="p">:</span> <span class="s2">"Get $5.00 off your next purchase for 500 points"</span><span class="p">,</span>
        <span class="s2">"icon"</span><span class="p">:</span> <span class="s2">"fa-dollar"</span><span class="p">,</span>
        <span class="s2">"cost_text"</span><span class="p">:</span> <span class="s2">"500 Points"</span><span class="p">,</span>
        <span class="s2">"amount"</span><span class="p">:</span> <span class="mi">500</span>
    <span class="p">}</span>
<span class="p">}</span>

</code></pre>

<p>This event is triggered after a certain amount of days of inactivity.  This is great for sending an email to remind the customer how close to earning a reward they are.</p>

<table><thead>
<tr>
<th>Important Attributes</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>email</td>
<td>The email address of the customer who made the referral.</td>
</tr>
<tr>
<td>points_needed</td>
<td>The number of points needed to earn a reward.</td>
</tr>
<tr>
<td>redemption_option</td>
<td>Object describing the reward option they are close to earning.</td>
</tr>
</tbody></table>

<h3 id="redemption-reminder">Redemption Reminder</h3>
<pre class="highlight ruby"><code><span class="no">Example</span> <span class="no">Event</span> <span class="no">JSON</span> <span class="no">Structure</span><span class="p">:</span>
<span class="p">{</span>
    <span class="s2">"topic"</span><span class="p">:</span> <span class="s2">"swell/redemption/reminder"</span><span class="p">,</span>
    <span class="s2">"name"</span><span class="p">:</span> <span class="s2">"Swell Redemption Reminder"</span><span class="p">,</span>
    <span class="s2">"email"</span><span class="p">:</span> <span class="s2">"john.smith@gmail.com"</span><span class="p">,</span>
    <span class="s2">"customer"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">"total_spend_cents"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="s2">"total_purchases"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="s2">"perks_redeemed"</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
        <span class="s2">"last_purchase_at"</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
        <span class="s2">"email"</span><span class="p">:</span> <span class="s2">"john.smith@gmail.com"</span><span class="p">,</span>
        <span class="s2">"points_earned"</span><span class="p">:</span> <span class="mi">575</span><span class="p">,</span>
        <span class="s2">"points_balance"</span><span class="p">:</span> <span class="mi">575</span><span class="p">,</span>
        <span class="s2">"points_expire_at"</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
        <span class="s2">"first_name"</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
        <span class="s2">"last_name"</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
        <span class="s2">"last_seen_at"</span><span class="p">:</span> <span class="s2">"2016-10-15T18:20:22.000Z"</span><span class="p">,</span>
        <span class="s2">"thirty_party_id"</span><span class="p">:</span> <span class="s2">"4302977345"</span><span class="p">,</span>
        <span class="s2">"referral_code"</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">"code"</span><span class="p">:</span> <span class="s2">"x09u052"</span><span class="p">,</span>
            <span class="s2">"shares"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">"facebook_shares"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">"twitter_shares"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">"email_shares"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">"emails_sent"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">"emails_viewed"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">"links_clicked_from_email"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">"links_clicked_from_twitter"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">"links_clicked_from_facebook"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">"orders"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="s2">"amount_cents"</span><span class="p">:</span> <span class="mi">3000</span><span class="p">,</span>
            <span class="s2">"average_amount_cents"</span><span class="p">:</span> <span class="mi">3000</span><span class="p">,</span>
            <span class="s2">"expires_at"</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
            <span class="s2">"expired"</span><span class="p">:</span> <span class="kp">false</span><span class="p">,</span>
            <span class="s2">"completed_referral_customers"</span><span class="p">:</span> <span class="p">[{</span>
                <span class="s2">"email"</span><span class="p">:</span> <span class="s2">"hillary.clinton@gmail.com"</span><span class="p">,</span>
                <span class="s2">"first_name"</span><span class="p">:</span> <span class="s2">"Hillary"</span><span class="p">,</span>
                <span class="s2">"last_name"</span><span class="p">:</span> <span class="s2">"Clinton"</span><span class="p">,</span>
                <span class="s2">"referral_points_contributed"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                <span class="s2">"last_seen_at"</span><span class="p">:</span> <span class="s2">"2016-10-15T16:38:20.000Z"</span>
            <span class="p">}],</span>
            <span class="s2">"email"</span><span class="p">:</span> <span class="s2">"john.smith@gmail.com"</span><span class="p">,</span>
            <span class="s2">"unique_clicks"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="s2">"total_clicks"</span><span class="p">:</span> <span class="mi">1</span>
        <span class="p">}</span>
    <span class="p">},</span>
    <span class="s2">"redemption_option"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">"id"</span><span class="p">:</span> <span class="mi">149</span><span class="p">,</span>
        <span class="s2">"name"</span><span class="p">:</span> <span class="s2">"$5.00 Off"</span><span class="p">,</span>
        <span class="s2">"description"</span><span class="p">:</span> <span class="s2">"Get $5.00 off your next purchase for 500 points"</span><span class="p">,</span>
        <span class="s2">"icon"</span><span class="p">:</span> <span class="s2">"fa-dollar"</span><span class="p">,</span>
        <span class="s2">"cost_text"</span><span class="p">:</span> <span class="s2">"500 Points"</span><span class="p">,</span>
        <span class="s2">"amount"</span><span class="p">:</span> <span class="mi">500</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>

<p>This event is triggered after a certain amount of days of inactivity and the customer has enough points for a reward.  This is great for sending an email to remind the customer that they have a reward waiting for them.</p>

<table><thead>
<tr>
<th>Important Attributes</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>email</td>
<td>The email address of the customer who made the referral.</td>
</tr>
<tr>
<td>redemption_option</td>
<td>Object describing the reward option they are able to earn.</td>
</tr>
</tbody></table>

<h3 id="customer-birthday">Customer Birthday</h3>
<pre class="highlight ruby"><code><span class="no">Example</span> <span class="no">Event</span> <span class="no">JSON</span> <span class="no">Structure</span><span class="p">:</span>
<span class="p">{</span>
    <span class="s2">"topic"</span><span class="p">:</span> <span class="s2">"swell/customer/birthday"</span><span class="p">,</span>
    <span class="s2">"name"</span><span class="p">:</span> <span class="s2">"Swell Customer Birthday"</span><span class="p">,</span>
    <span class="s2">"email"</span><span class="p">:</span> <span class="s2">"john.smith@gmail.com"</span><span class="p">,</span>
    <span class="s2">"customer"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">"total_spend_cents"</span><span class="p">:</span> <span class="mi">2500</span><span class="p">,</span>
        <span class="s2">"total_purchases"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="s2">"perks_redeemed"</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
        <span class="s2">"last_purchase_at"</span><span class="p">:</span> <span class="s2">"2016-09-23T00:55:35.000Z"</span><span class="p">,</span>
        <span class="s2">"email"</span><span class="p">:</span> <span class="s2">"asudhquiwehqwiueh123@mailinator.com"</span><span class="p">,</span>
        <span class="s2">"points_earned"</span><span class="p">:</span> <span class="mi">450</span><span class="p">,</span>
        <span class="s2">"points_balance"</span><span class="p">:</span> <span class="mi">450</span><span class="p">,</span>
        <span class="s2">"points_expire_at"</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
        <span class="s2">"first_name"</span><span class="p">:</span> <span class="s2">"John"</span><span class="p">,</span>
        <span class="s2">"last_name"</span><span class="p">:</span> <span class="s2">"Smith"</span><span class="p">,</span>
        <span class="s2">"last_seen_at"</span><span class="p">:</span> <span class="s2">"2016-09-23T00:55:35.000Z"</span><span class="p">,</span>
        <span class="s2">"thirty_party_id"</span><span class="p">:</span> <span class="s2">"4055305025"</span>
    <span class="p">},</span>
    <span class="s2">"perk"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">"id"</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
      <span class="s2">"campaign_id"</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
      <span class="s2">"merchant_id"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
      <span class="s2">"customer_id"</span><span class="p">:</span> <span class="mi">128</span><span class="p">,</span>
      <span class="s2">"reward_points"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
      <span class="s2">"completed"</span><span class="p">:</span> <span class="kp">false</span><span class="p">,</span>
      <span class="s2">"completed_at"</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
      <span class="s2">"awarded"</span><span class="p">:</span> <span class="kp">false</span><span class="p">,</span>
      <span class="s2">"awarded_at"</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
      <span class="s2">"pending"</span><span class="p">:</span> <span class="kp">false</span><span class="p">,</span>
      <span class="s2">"reversed"</span><span class="p">:</span> <span class="kp">false</span><span class="p">,</span>
      <span class="s2">"reversed_at"</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
      <span class="s2">"expired"</span><span class="p">:</span> <span class="kp">false</span><span class="p">,</span>
      <span class="s2">"expired_at"</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
      <span class="s2">"expires_at"</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
      <span class="s2">"redemption_option_id"</span><span class="p">:</span> <span class="mi">152</span><span class="p">,</span>
      <span class="s2">"history_title"</span><span class="p">:</span> <span class="s2">"Happy Birthday"</span><span class="p">,</span>
      <span class="s2">"created_at"</span><span class="p">:</span> <span class="s2">"2016-09-23T00:47:40.000Z"</span>
    <span class="p">},</span>
    <span class="s2">"redemption"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">"id"</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
      <span class="s2">"created_at"</span><span class="p">:</span> <span class="s2">"2016-09-23T00:47:40.758Z"</span><span class="p">,</span>
      <span class="s2">"updated_at"</span><span class="p">:</span> <span class="s2">"2016-09-23T00:47:40.758Z"</span><span class="p">,</span>
      <span class="s2">"reward_text"</span><span class="p">:</span> <span class="s2">"abc123"</span><span class="p">,</span>
      <span class="s2">"approved"</span><span class="p">:</span> <span class="kp">true</span><span class="p">,</span>
      <span class="s2">"approved_at"</span><span class="p">:</span> <span class="s2">"2016-09-23T00:47:40.903Z"</span>
    <span class="p">},</span>
    <span class="s2">"redemption_option"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">"id"</span><span class="p">:</span> <span class="mi">149</span><span class="p">,</span>
      <span class="s2">"amount"</span><span class="p">:</span> <span class="mi">500</span><span class="p">,</span>
      <span class="s2">"name"</span><span class="p">:</span> <span class="s2">"$5.00 Off"</span><span class="p">,</span>
      <span class="s2">"description"</span><span class="p">:</span> <span class="s2">"Get $5.00 off your next purchase for 500 points"</span><span class="p">,</span>
      <span class="s2">"icon"</span><span class="p">:</span> <span class="s2">"fa-dollar"</span><span class="p">,</span>
      <span class="s2">"cost_text"</span><span class="p">:</span> <span class="s2">"500 Points"</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>

<p>This event is triggered after a certain amount of days of inactivity and the customer has enough points for a reward.  This is great for sending an email to remind the customer that they have a reward waiting for them.</p>

<table><thead>
<tr>
<th>Important Attributes</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>email</td>
<td>The email address of the customer who&rsquo;s birthday it is.</td>
</tr>
<tr>
<td>perk.reward_points</td>
<td>If customer was gifted points, this is how many.</td>
</tr>
<tr>
<td>redemption.reward_text</td>
<td>If customer was gifted a coupon, this is the coupon code.</td>
</tr>
<tr>
<td>redemption_option.name</td>
<td>If customer was gifted a coupon, this is the discount name.</td>
</tr>
</tbody></table>

<h3 id="referral-link-share">Referral Link Share</h3>
<pre class="highlight ruby"><code><span class="no">Example</span> <span class="no">Event</span> <span class="no">JSON</span> <span class="no">Structure</span><span class="p">:</span>

<span class="p">{</span>
    <span class="s2">"topic"</span><span class="p">:</span> <span class="s2">"swell/referral/share"</span><span class="p">,</span>
    <span class="s2">"name"</span><span class="p">:</span> <span class="s2">"Swell Referral Share"</span><span class="p">,</span>
    <span class="s2">"email"</span><span class="p">:</span> <span class="s2">"sally.jane@gmail.com"</span><span class="p">,</span>
    <span class="s2">"from"</span><span class="p">:</span> <span class="s2">"john.smith@gmail.com"</span><span class="p">,</span>
    <span class="s2">"customer"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">"total_spend_cents"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="s2">"total_purchases"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="s2">"perks_redeemed"</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
        <span class="s2">"last_purchase_at"</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
        <span class="s2">"email"</span><span class="p">:</span> <span class="s2">"john.smith@gmail.com"</span><span class="p">,</span>
        <span class="s2">"points_earned"</span><span class="p">:</span> <span class="mi">675</span><span class="p">,</span>
        <span class="s2">"points_balance"</span><span class="p">:</span> <span class="mi">675</span><span class="p">,</span>
        <span class="s2">"points_expire_at"</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
        <span class="s2">"first_name"</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
        <span class="s2">"last_name"</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
        <span class="s2">"last_seen_at"</span><span class="p">:</span> <span class="s2">"2016-10-15T18:43:24.000Z"</span><span class="p">,</span>
        <span class="s2">"thirty_party_id"</span><span class="p">:</span> <span class="s2">"4302977345"</span><span class="p">,</span>
        <span class="s2">"referral_code"</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">"code"</span><span class="p">:</span> <span class="s2">"x09u052"</span><span class="p">,</span>
            <span class="s2">"shares"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">"facebook_shares"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">"twitter_shares"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">"email_shares"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">"emails_sent"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">"emails_viewed"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">"links_clicked_from_email"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">"links_clicked_from_twitter"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">"links_clicked_from_facebook"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">"orders"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="s2">"amount_cents"</span><span class="p">:</span> <span class="mi">3000</span><span class="p">,</span>
            <span class="s2">"average_amount_cents"</span><span class="p">:</span> <span class="mi">3000</span><span class="p">,</span>
            <span class="s2">"expires_at"</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
            <span class="s2">"expired"</span><span class="p">:</span> <span class="kp">false</span><span class="p">,</span>
            <span class="s2">"completed_referral_customers"</span><span class="p">:</span> <span class="p">[{</span>
                <span class="s2">"email"</span><span class="p">:</span> <span class="s2">"hillary.clinton@gmail.com"</span><span class="p">,</span>
                <span class="s2">"first_name"</span><span class="p">:</span> <span class="s2">"Hillary"</span><span class="p">,</span>
                <span class="s2">"last_name"</span><span class="p">:</span> <span class="s2">"Clinton"</span><span class="p">,</span>
                <span class="s2">"referral_points_contributed"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                <span class="s2">"last_seen_at"</span><span class="p">:</span> <span class="s2">"2016-10-15T16:38:20.000Z"</span>
            <span class="p">}],</span>
            <span class="s2">"email"</span><span class="p">:</span> <span class="s2">"john.smith@gmail.com"</span><span class="p">,</span>
            <span class="s2">"unique_clicks"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="s2">"total_clicks"</span><span class="p">:</span> <span class="mi">1</span>
        <span class="p">}</span>
    <span class="p">},</span>
    <span class="s2">"referral_link"</span><span class="p">:</span> <span class="s2">"http://rwrd.io/x09u052"</span>
<span class="p">}</span>
</code></pre>

<p>This event is triggered when a customer shares their referral link to their friends.  This is great for telling new customers that someone they know like&rsquo;s your store.</p>

<table><thead>
<tr>
<th>Important Attributes</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>email</td>
<td>The email address of the recipient of the referral link (the friend).</td>
</tr>
<tr>
<td>customer.first_name</td>
<td>The name of the customer who shared their referral link.</td>
</tr>
<tr>
<td>referral_link</td>
<td>The url of the customer&rsquo;s referral link being shared</td>
</tr>
<tr>
<td>from</td>
<td>The email address of the customer who shared their referral link</td>
</tr>
</tbody></table>

<h3 id="vip-tier-earned">VIP Tier Earned</h3>
<pre class="highlight ruby"><code>
<span class="no">Example</span> <span class="no">Event</span> <span class="no">JSON</span> <span class="no">Structure</span><span class="p">:</span>
<span class="p">{</span>
    <span class="s2">"topic"</span><span class="p">:</span> <span class="s2">"swell/tier/earned"</span><span class="p">,</span>
    <span class="s2">"name"</span><span class="p">:</span> <span class="s2">"Swell Tier Earned"</span><span class="p">,</span>
    <span class="s2">"email"</span><span class="p">:</span> <span class="s2">"john.smith@gmail.com"</span><span class="p">,</span>
    <span class="s2">"customer"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">"total_spend_cents"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="s2">"total_purchases"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="s2">"perks_redeemed"</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
        <span class="s2">"last_purchase_at"</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
        <span class="s2">"email"</span><span class="p">:</span> <span class="s2">"john.smith@gmail.com"</span><span class="p">,</span>
        <span class="s2">"points_earned"</span><span class="p">:</span> <span class="mi">375</span><span class="p">,</span>
        <span class="s2">"points_balance"</span><span class="p">:</span> <span class="mi">375</span><span class="p">,</span>
        <span class="s2">"points_expire_at"</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
        <span class="s2">"first_name"</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
        <span class="s2">"last_name"</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
        <span class="s2">"last_seen_at"</span><span class="p">:</span> <span class="s2">"2016-10-15T18:14:56.000Z"</span><span class="p">,</span>
        <span class="s2">"thirty_party_id"</span><span class="p">:</span> <span class="s2">"4302977345"</span><span class="p">,</span>
        <span class="s2">"vip_tier_name"</span><span class="p">:</span> <span class="s2">"SILVER"</span><span class="p">,</span>
        <span class="s2">"vip_tier_ends_at"</span><span class="p">:</span> <span class="s2">"2017-10-31"</span><span class="p">,</span>
        <span class="s2">"referral_code"</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">"code"</span><span class="p">:</span> <span class="s2">"x09u052"</span><span class="p">,</span>
            <span class="s2">"shares"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">"facebook_shares"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">"twitter_shares"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">"email_shares"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">"emails_sent"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">"emails_viewed"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">"links_clicked_from_email"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">"links_clicked_from_twitter"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">"links_clicked_from_facebook"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">"orders"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="s2">"amount_cents"</span><span class="p">:</span> <span class="mi">3000</span><span class="p">,</span>
            <span class="s2">"average_amount_cents"</span><span class="p">:</span> <span class="mi">3000</span><span class="p">,</span>
            <span class="s2">"expires_at"</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
            <span class="s2">"expired"</span><span class="p">:</span> <span class="kp">false</span><span class="p">,</span>
            <span class="s2">"completed_referral_customers"</span><span class="p">:</span> <span class="p">[{</span>
                <span class="s2">"email"</span><span class="p">:</span> <span class="s2">"hillary.clinton@gmail.com"</span><span class="p">,</span>
                <span class="s2">"first_name"</span><span class="p">:</span> <span class="s2">"Hillary"</span><span class="p">,</span>
                <span class="s2">"last_name"</span><span class="p">:</span> <span class="s2">"Clinton"</span><span class="p">,</span>
                <span class="s2">"referral_points_contributed"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                <span class="s2">"last_seen_at"</span><span class="p">:</span> <span class="s2">"2016-10-15T16:38:20.000Z"</span>
            <span class="p">}],</span>
            <span class="s2">"email"</span><span class="p">:</span> <span class="s2">"john.smith@gmail.com"</span><span class="p">,</span>
            <span class="s2">"unique_clicks"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="s2">"total_clicks"</span><span class="p">:</span> <span class="mi">1</span>
        <span class="p">}</span>
    <span class="p">},</span>
    <span class="s2">"new_tier"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">"id"</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
        <span class="s2">"name"</span><span class="p">:</span> <span class="s2">"GOLD"</span><span class="p">,</span>
        <span class="s2">"description"</span><span class="p">:</span> <span class="s2">"Earn Gold status after spending $100"</span><span class="p">,</span>
        <span class="s2">"points_earned"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="s2">"amount_spent_cents"</span><span class="p">:</span> <span class="mi">10000</span><span class="p">,</span>
        <span class="s2">"purchases_made"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="s2">"points_multiplier"</span><span class="p">:</span> <span class="mi">1</span><span class="o">.</span><span class="mi">50</span><span class="p">,</span>
        <span class="s2">"rank"</span><span class="p">:</span> <span class="mi">2</span>
    <span class="p">},</span>
    <span class="s2">"old_tier"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">"id"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="s2">"name"</span><span class="p">:</span> <span class="s2">"SILVER"</span><span class="p">,</span>
        <span class="s2">"description"</span><span class="p">:</span> <span class="s2">"Earn Silver status after spending $50"</span><span class="p">,</span>
        <span class="s2">"points_earned"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="s2">"amount_spent_cents"</span><span class="p">:</span> <span class="mi">5000</span><span class="p">,</span>
        <span class="s2">"purchases_made"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="s2">"points_multiplier"</span><span class="p">:</span> <span class="mi">1</span><span class="o">.</span><span class="mi">20</span><span class="p">,</span>
        <span class="s2">"rank"</span><span class="p">:</span> <span class="mi">1</span>
    <span class="p">}</span>
<span class="p">}</span>

</code></pre>

<p>This event is triggered when a customer meets the requirement for a new tier. This is great for letting a customer know they reached a certain status level.</p>

<table><thead>
<tr>
<th>Important Attributes</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>email</td>
<td>The email address of the customer who earned the new tier.</td>
</tr>
<tr>
<td>customer</td>
<td>The customer object who earned the new tier.</td>
</tr>
<tr>
<td>new_tier</td>
<td>Object describing the new tier they just earned</td>
</tr>
<tr>
<td>old_tier</td>
<td>Object describing the tier they came from.  Attribute won&rsquo;t be present if they had no previous tier.</td>
</tr>
</tbody></table>

<h3 id="vip-tier-lost">VIP Tier Lost</h3>
<pre class="highlight ruby"><code>
<span class="no">Example</span> <span class="no">Event</span> <span class="no">JSON</span> <span class="no">Structure</span><span class="p">:</span>
<span class="p">{</span>
    <span class="s2">"topic"</span><span class="p">:</span> <span class="s2">"swell/tier/lost"</span><span class="p">,</span>
    <span class="s2">"name"</span><span class="p">:</span> <span class="s2">"Swell Tier Lost"</span><span class="p">,</span>
    <span class="s2">"email"</span><span class="p">:</span> <span class="s2">"john.smith@gmail.com"</span><span class="p">,</span>
    <span class="s2">"customer"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">"total_spend_cents"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="s2">"total_purchases"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="s2">"perks_redeemed"</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
        <span class="s2">"last_purchase_at"</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
        <span class="s2">"email"</span><span class="p">:</span> <span class="s2">"john.smith@gmail.com"</span><span class="p">,</span>
        <span class="s2">"points_earned"</span><span class="p">:</span> <span class="mi">375</span><span class="p">,</span>
        <span class="s2">"points_balance"</span><span class="p">:</span> <span class="mi">375</span><span class="p">,</span>
        <span class="s2">"points_expire_at"</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
        <span class="s2">"first_name"</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
        <span class="s2">"last_name"</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
        <span class="s2">"last_seen_at"</span><span class="p">:</span> <span class="s2">"2016-10-15T18:14:56.000Z"</span><span class="p">,</span>
        <span class="s2">"thirty_party_id"</span><span class="p">:</span> <span class="s2">"4302977345"</span><span class="p">,</span>
        <span class="s2">"vip_tier_name"</span><span class="p">:</span> <span class="s2">"SILVER"</span><span class="p">,</span>
        <span class="s2">"vip_tier_ends_at"</span><span class="p">:</span> <span class="s2">"2017-10-31"</span><span class="p">,</span>
        <span class="s2">"referral_code"</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">"code"</span><span class="p">:</span> <span class="s2">"x09u052"</span><span class="p">,</span>
            <span class="s2">"shares"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">"facebook_shares"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">"twitter_shares"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">"email_shares"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">"emails_sent"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">"emails_viewed"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">"links_clicked_from_email"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">"links_clicked_from_twitter"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">"links_clicked_from_facebook"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">"orders"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="s2">"amount_cents"</span><span class="p">:</span> <span class="mi">3000</span><span class="p">,</span>
            <span class="s2">"average_amount_cents"</span><span class="p">:</span> <span class="mi">3000</span><span class="p">,</span>
            <span class="s2">"expires_at"</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
            <span class="s2">"expired"</span><span class="p">:</span> <span class="kp">false</span><span class="p">,</span>
            <span class="s2">"completed_referral_customers"</span><span class="p">:</span> <span class="p">[{</span>
                <span class="s2">"email"</span><span class="p">:</span> <span class="s2">"hillary.clinton@gmail.com"</span><span class="p">,</span>
                <span class="s2">"first_name"</span><span class="p">:</span> <span class="s2">"Hillary"</span><span class="p">,</span>
                <span class="s2">"last_name"</span><span class="p">:</span> <span class="s2">"Clinton"</span><span class="p">,</span>
                <span class="s2">"referral_points_contributed"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                <span class="s2">"last_seen_at"</span><span class="p">:</span> <span class="s2">"2016-10-15T16:38:20.000Z"</span>
            <span class="p">}],</span>
            <span class="s2">"email"</span><span class="p">:</span> <span class="s2">"john.smith@gmail.com"</span><span class="p">,</span>
            <span class="s2">"unique_clicks"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="s2">"total_clicks"</span><span class="p">:</span> <span class="mi">1</span>
        <span class="p">}</span>
    <span class="p">},</span>
    <span class="s2">"old_tier"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">"id"</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
        <span class="s2">"name"</span><span class="p">:</span> <span class="s2">"GOLD"</span><span class="p">,</span>
        <span class="s2">"description"</span><span class="p">:</span> <span class="s2">"Earn Gold status after spending $100"</span><span class="p">,</span>
        <span class="s2">"points_earned"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="s2">"amount_spent_cents"</span><span class="p">:</span> <span class="mi">10000</span><span class="p">,</span>
        <span class="s2">"purchases_made"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="s2">"points_multiplier"</span><span class="p">:</span> <span class="mi">1</span><span class="o">.</span><span class="mi">50</span><span class="p">,</span>
        <span class="s2">"rank"</span><span class="p">:</span> <span class="mi">2</span>
    <span class="p">},</span>
    <span class="s2">"new_tier"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">"id"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="s2">"name"</span><span class="p">:</span> <span class="s2">"SILVER"</span><span class="p">,</span>
        <span class="s2">"description"</span><span class="p">:</span> <span class="s2">"Earn Silver status after spending $50"</span><span class="p">,</span>
        <span class="s2">"points_earned"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="s2">"amount_spent_cents"</span><span class="p">:</span> <span class="mi">5000</span><span class="p">,</span>
        <span class="s2">"purchases_made"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="s2">"points_multiplier"</span><span class="p">:</span> <span class="mi">1</span><span class="o">.</span><span class="mi">20</span><span class="p">,</span>
        <span class="s2">"rank"</span><span class="p">:</span> <span class="mi">1</span>
    <span class="p">}</span>
<span class="p">}</span>

</code></pre>

<p>This event is triggered when a customer fails to meet the requirement for a tier after the specified period of time has passed.</p>

<table><thead>
<tr>
<th>Important Attributes</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>email</td>
<td>The email address of the customer who earned the new tier.</td>
</tr>
<tr>
<td>customer</td>
<td>The customer object who earned the new tier.</td>
</tr>
<tr>
<td>new_tier</td>
<td>Object describing the new tier they dropped to. Attribute won&rsquo;t be present if they now have no tier.</td>
</tr>
<tr>
<td>old_tier</td>
<td>Object describing the tier they just lost.</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
          </div>
      </div>
    </div>
  </body>
</html>
